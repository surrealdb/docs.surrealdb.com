<script is:inline>
	if ('serviceWorker' in navigator) {
		navigator.serviceWorker.register('/sw.js');
		navigator.serviceWorker.addEventListener('controllerchange', () => {
			window.location.reload();
		});
	}
</script>

<script defer is:inline>

	// Common Room

	window.signals = Object.assign(
		[],
		['page', 'identify', 'form'].reduce(function(acc, method) {
			acc[method] = function() {
				signals.push([method, arguments]);
				return signals;
			};
			return acc;
		}, {})
	);

	{
		let s = document.createElement('script');
		s.src = 'https://cdn.cr-relay.com/v1/site/0473f724-c10f-49c4-948c-f4529865d242/signals.js';
		s.async = false;
		s.defer = true;
		document.head.appendChild(s);
	}

	// Google

	window.dataLayer = window.dataLayer || [];
    window.gtag = function () { window.dataLayer.push(arguments); };
	gtag('set', 'linker', {
		accept_incoming: true,
		decorate_forms: true,
		url_position: 'query',
		domains: ['surrealdb.com', 'surrealist.app']
	});
    gtag('js', new Date());
    gtag('config', 'G-J1NWM32T1V', {
		server_container_url: 'https://surrealdb.com/data',
	});

	{
		let s = document.createElement('script');
		s.src = 'https://surrealdb.com/data/script.js';
		s.async = false;
		s.defer = true;
		document.head.appendChild(s);
	}

	// LinkedIn

	_linkedin_partner_id = '3271313';
    window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
    window._linkedin_data_partner_ids.push(_linkedin_partner_id);
    window.lintrk = class { constructor(a, b) { window.lintrk.q.push([a, b]) } };
    window.lintrk.q = [];

	{
		let s = document.createElement('script');
		s.src = 'https://snap.licdn.com/li.lms-analytics/insight.min.js';
		s.async = false;
		s.defer = true;
		document.head.appendChild(s);
	}

	// Twitter

	!function(e,s){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
	},s.version='1.1',s.queue=[])}(window);

    window.twq('config', 'oexls');
    window.twq('event', 'PageView');

	{
		let s = document.createElement('script');
		s.src = 'https://static.ads-twitter.com/uwt.js';
		s.async = false;
		s.defer = true;
		document.head.appendChild(s);
	}

</script>
