---
import RenderDoc from '@src/components/RenderDoc.astro';
import { SDK_JS_VERSIONS, type SdkJsVersion } from '@src/util/sdkJsVersion';

export const getStaticPaths = async () => {
    return SDK_JS_VERSIONS.filter((v) => v !== 'latest') // Latest is handled by main route
        .map((version) => ({
            params: { version },
        }));
};

const { version } = Astro.params;

// Validate version
if (!version || !SDK_JS_VERSIONS.includes(version as SdkJsVersion)) {
    return Astro.redirect('/docs/sdk/javascript', 301);
}

// Map version to collection doc name
const docName = version === '1.x' ? 'sdk-javascript-1x' : 'sdk-javascript';
---

<RenderDoc doc={docName as any} slug="index" />
