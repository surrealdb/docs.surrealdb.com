---
import { getCollection } from 'astro:content';
import RenderDoc from '@src/components/RenderDoc.astro';
import { SURREALQL_VERSIONS } from '@src/util/surrealqlVersion';

export const getStaticPaths = async () => {
    return SURREALQL_VERSIONS
        .filter(v => v !== 'latest') // Latest is handled by main route
        .map(version => ({
            params: { version },
        }));
};

const { version } = Astro.params;

// Validate version
if (!SURREALQL_VERSIONS.includes(version as any)) {
    return Astro.redirect('/docs/surrealql', 301);
}
---

<RenderDoc doc="surrealql" slug="index" />

