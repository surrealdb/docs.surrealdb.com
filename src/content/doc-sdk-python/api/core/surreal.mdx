---
sidebar_position: 1
sidebar_label: Surreal
title: Python | SDK | API Reference | Surreal
description: The Surreal and AsyncSurreal factory functions are the main entry points for connecting to and interacting with a SurrealDB instance from Python.
---

import Label from "@components/shared/Label.astro";

# `Surreal` / `AsyncSurreal` {#surreal}

The `Surreal` and `AsyncSurreal` factory functions create a connection to a SurrealDB instance. They inspect the URL scheme and return the appropriate connection class — WebSocket, HTTP, or embedded — so you use the same interface regardless of protocol.

`Surreal(url)` returns a blocking (synchronous) connection. `AsyncSurreal(url)` returns an asynchronous connection. Both expose the same set of methods; the async variants must be awaited.

**Source:** [surrealdb.py](https://github.com/surrealdb/surrealdb.py)

## Factory Functions {#factory-functions}

### `Surreal(url)` {#surreal-sync}

Creates a synchronous connection based on the URL scheme.

```python title="Syntax"
from surrealdb import Surreal

db = Surreal(url)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>url</code> <Label label="required" /></td>
            <td><code>str</code></td>
            <td>The connection URL. The scheme determines the connection type.</td>
        </tr>
    </tbody>
</table>

**Returns:** `BlockingWsSurrealConnection | BlockingHttpSurrealConnection | BlockingEmbeddedSurrealConnection`

### `AsyncSurreal(url)` {#surreal-async}

Creates an asynchronous connection based on the URL scheme.

```python title="Syntax"
from surrealdb import AsyncSurreal

db = AsyncSurreal(url)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>url</code> <Label label="required" /></td>
            <td><code>str</code></td>
            <td>The connection URL. The scheme determines the connection type.</td>
        </tr>
    </tbody>
</table>

**Returns:** `AsyncWsSurrealConnection | AsyncHttpSurrealConnection | AsyncEmbeddedSurrealConnection`

### URL Schemes

| Scheme | Connection Type | Description |
|---|---|---|
| `ws://`, `wss://` | WebSocket | Full-featured stateful connection. Supports live queries, sessions, and transactions. |
| `http://`, `https://` | HTTP | Stateless connection. Each request is independent. |
| `mem://`, `memory://` | Embedded (in-memory) | In-process database that does not persist data. |
| `file://`, `surrealkv://` | Embedded (on-disk) | In-process database backed by SurrealKV storage. |

### Examples

```python title="WebSocket"
from surrealdb import Surreal

db = Surreal("ws://localhost:8000")
```

```python title="HTTP"
from surrealdb import Surreal

db = Surreal("https://cloud.surrealdb.com")
```

```python title="Embedded in-memory"
from surrealdb import Surreal

db = Surreal("mem://")
```

```python title="Embedded on-disk"
from surrealdb import Surreal

db = Surreal("surrealkv://path/to/database")
```

```python title="Async WebSocket"
from surrealdb import AsyncSurreal

db = AsyncSurreal("ws://localhost:8000")
```

---

## Connection Methods

### `.connect()` {#connect}

Opens the connection to the SurrealDB instance. The URL can optionally be overridden here.

```python title="Method Syntax"
db.connect(url)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>url</code> <Label label="optional" /></td>
            <td><code>str | None</code></td>
            <td>An optional URL to override the one provided to the factory function. Defaults to <code>None</code>.</td>
        </tr>
    </tbody>
</table>

**Returns:** `None`

#### Examples

```python title="Synchronous"
from surrealdb import Surreal

db = Surreal("ws://localhost:8000")
db.connect()
```

```python title="Asynchronous"
from surrealdb import AsyncSurreal

db = AsyncSurreal("ws://localhost:8000")
await db.connect()
```

```python title="Override URL"
db = Surreal("ws://localhost:8000")
db.connect("ws://other-host:8000")
```

### `.close()` {#close}

Closes the active connection and releases resources.

```python title="Method Syntax"
db.close()
```

**Returns:** `None`

#### Examples

```python title="Synchronous"
db.close()
```

```python title="Asynchronous"
await db.close()
```

### `.use()` {#use}

Switches to a specific namespace and database.

```python title="Method Syntax"
db.use(namespace, database)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>namespace</code> <Label label="required" /></td>
            <td><code>str</code></td>
            <td>The namespace to use.</td>
        </tr>
        <tr>
            <td><code>database</code> <Label label="required" /></td>
            <td><code>str</code></td>
            <td>The database to use.</td>
        </tr>
    </tbody>
</table>

**Returns:** `None`

#### Examples

```python title="Synchronous"
db.use("my_namespace", "my_database")
```

```python title="Asynchronous"
await db.use("my_namespace", "my_database")
```

### `.version()` {#version}

Returns the version string of the connected SurrealDB instance.

```python title="Method Syntax"
db.version()
```

**Returns:** `str`

#### Examples

```python title="Synchronous"
ver = db.version()
print(ver)  # e.g. "surrealdb-2.2.0"
```

```python title="Asynchronous"
ver = await db.version()
print(ver)
```

---

## Authentication Methods

### `.signup()` {#signup}

Signs up a user to a specific access method.

```python title="Method Syntax"
db.signup(vars)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>vars</code> <Label label="required" /></td>
            <td><code>dict[str, <a href="/docs/sdk/python/api/types/#value">Value</a>]</code></td>
            <td>Variables used for signup, including <code>namespace</code>, <code>database</code>, <code>access</code>, and any additional fields required by the access method.</td>
        </tr>
    </tbody>
</table>

**Returns:** [`Tokens`](/docs/sdk/python/api/types/#tokens)

#### Examples

```python title="Synchronous"
token = db.signup({
    "namespace": "my_namespace",
    "database": "my_database",
    "access": "user_access",
    "email": "user@example.com",
    "password": "s3cret",
})
```

```python title="Asynchronous"
token = await db.signup({
    "namespace": "my_namespace",
    "database": "my_database",
    "access": "user_access",
    "email": "user@example.com",
    "password": "s3cret",
})
```

### `.signin()` {#signin}

Signs in to the database with the given credentials.

```python title="Method Syntax"
db.signin(vars)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>vars</code> <Label label="required" /></td>
            <td><code>dict[str, <a href="/docs/sdk/python/api/types/#value">Value</a>]</code></td>
            <td>Credentials for authentication. For root access, provide <code>username</code> and <code>password</code>. For scoped access, also include <code>namespace</code>, <code>database</code>, and <code>access</code>.</td>
        </tr>
    </tbody>
</table>

**Returns:** [`Tokens`](/docs/sdk/python/api/types/#tokens)

#### Examples

```python title="Root signin (sync)"
token = db.signin({
    "username": "root",
    "password": "root",
})
```

```python title="Root signin (async)"
token = await db.signin({
    "username": "root",
    "password": "root",
})
```

```python title="Scoped signin"
token = db.signin({
    "namespace": "my_namespace",
    "database": "my_database",
    "access": "user_access",
    "email": "user@example.com",
    "password": "s3cret",
})
```

### `.authenticate()` {#authenticate}

Authenticates the current connection with a JWT token.

```python title="Method Syntax"
db.authenticate(token)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>token</code> <Label label="required" /></td>
            <td><code>str</code></td>
            <td>The JWT token to authenticate with.</td>
        </tr>
    </tbody>
</table>

**Returns:** `None`

#### Examples

```python title="Synchronous"
db.authenticate("eyJhbGciOiJIUzI1NiIs...")
```

```python title="Asynchronous"
await db.authenticate("eyJhbGciOiJIUzI1NiIs...")
```

### `.invalidate()` {#invalidate}

Invalidates the authentication for the current connection, removing the associated JWT token.

```python title="Method Syntax"
db.invalidate()
```

**Returns:** `None`

#### Examples

```python title="Synchronous"
db.invalidate()
```

```python title="Asynchronous"
await db.invalidate()
```

### `.info()` {#info}

Returns the record of the currently authenticated user.

```python title="Method Syntax"
db.info()
```

**Returns:** [`Value`](/docs/sdk/python/api/types/#value)

#### Examples

```python title="Synchronous"
user = db.info()
print(user)  # e.g. {"id": "users:john", "email": "john@example.com"}
```

```python title="Asynchronous"
user = await db.info()
```

---

## Variables

### `.let()` {#let}

Defines a variable on the current connection that can be used in subsequent queries.

```python title="Method Syntax"
db.let(key, value)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>key</code> <Label label="required" /></td>
            <td><code>str</code></td>
            <td>The name of the variable (without the <code>$</code> prefix).</td>
        </tr>
        <tr>
            <td><code>value</code> <Label label="required" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#value">Value</a></code></td>
            <td>The value to assign to the variable.</td>
        </tr>
    </tbody>
</table>

**Returns:** `None`

#### Examples

```python title="Synchronous"
db.let("user_id", RecordID("users", "john"))
result = db.query("SELECT * FROM users WHERE id = $user_id")
```

```python title="Asynchronous"
await db.let("user_id", RecordID("users", "john"))
result = await db.query("SELECT * FROM users WHERE id = $user_id")
```

### `.unset()` {#unset}

Removes a previously defined variable from the current connection.

```python title="Method Syntax"
db.unset(key)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>key</code> <Label label="required" /></td>
            <td><code>str</code></td>
            <td>The name of the variable to remove.</td>
        </tr>
    </tbody>
</table>

**Returns:** `None`

#### Examples

```python title="Synchronous"
db.unset("user_id")
```

```python title="Asynchronous"
await db.unset("user_id")
```

---

## Query Methods

### `.query()` {#query}

Runs a set of [SurrealQL](/docs/surrealql) statements against the database.

```python title="Method Syntax"
db.query(query, vars)
```

> [!IMPORTANT]
> When multiple statements are provided, `.query()` returns only the first statement's result. If you need results from all statements, use [`.query_raw()`](#query-raw) instead.

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>query</code> <Label label="required" /></td>
            <td><code>str</code></td>
            <td>The SurrealQL query string to execute.</td>
        </tr>
        <tr>
            <td><code>vars</code> <Label label="optional" /></td>
            <td><code>dict[str, <a href="/docs/sdk/python/api/types/#value">Value</a>] | None</code></td>
            <td>Variables to bind into the query. Defaults to <code>None</code>.</td>
        </tr>
    </tbody>
</table>

**Returns:** [`Value`](/docs/sdk/python/api/types/#value)

#### Examples

```python title="Synchronous"
result = db.query(
    "SELECT * FROM users WHERE age > $min_age",
    {"min_age": 18},
)
```

```python title="Asynchronous"
result = await db.query(
    "SELECT * FROM users WHERE age > $min_age",
    {"min_age": 18},
)
```

```python title="Without variables"
result = db.query("SELECT * FROM users")
```

### `.query_raw()` {#query-raw}

Runs a set of SurrealQL statements and returns the raw RPC response, including per-statement results, statuses, and execution times. Unlike `.query()`, errors in individual statements are returned in the response rather than raised as exceptions.

```python title="Method Syntax"
db.query_raw(query, params)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>query</code> <Label label="required" /></td>
            <td><code>str</code></td>
            <td>The SurrealQL query string to execute.</td>
        </tr>
        <tr>
            <td><code>params</code> <Label label="optional" /></td>
            <td><code>dict[str, <a href="/docs/sdk/python/api/types/#value">Value</a>] | None</code></td>
            <td>Variables to bind into the query. Defaults to <code>None</code>.</td>
        </tr>
    </tbody>
</table>

**Returns:** `dict[str, Any]`

#### Examples

```python title="Synchronous"
raw = db.query_raw(
    "CREATE users SET name = $name; SELECT * FROM users;",
    {"name": "John"},
)

for statement in raw["result"]:
    print(statement["status"], statement["time"])
```

```python title="Asynchronous"
raw = await db.query_raw(
    "CREATE users SET name = $name; SELECT * FROM users;",
    {"name": "John"},
)
```

---

## CRUD Methods

### `.select()` {#select}

Selects all records in a table, or a specific record by its ID.

```python title="Method Syntax"
db.select(record)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>record</code> <Label label="required" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#recordidtype">RecordIdType</a></code></td>
            <td>A table name (<code>str</code>) or a <code>RecordID</code> to select.</td>
        </tr>
    </tbody>
</table>

**Returns:** [`Value`](/docs/sdk/python/api/types/#value)

#### Examples

```python title="Synchronous"
users = db.select("users")

user = db.select(RecordID("users", "john"))
```

```python title="Asynchronous"
users = await db.select("users")

user = await db.select(RecordID("users", "john"))
```

### `.create()` {#create}

Creates a record in a table. If a `RecordID` is passed, the record is created with that specific ID. If a table name is passed, a random ID is generated.

```python title="Method Syntax"
db.create(record, data)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>record</code> <Label label="required" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#recordidtype">RecordIdType</a></code></td>
            <td>The table name or <code>RecordID</code> to create.</td>
        </tr>
        <tr>
            <td><code>data</code> <Label label="optional" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#value">Value</a> | None</code></td>
            <td>The record data. Defaults to <code>None</code>.</td>
        </tr>
    </tbody>
</table>

**Returns:** [`Value`](/docs/sdk/python/api/types/#value)

#### Examples

```python title="Synchronous"
user = db.create("users", {
    "name": "John",
    "email": "john@example.com",
})

product = db.create(RecordID("products", "apple"), {
    "name": "Apple",
    "price": 1.50,
})
```

```python title="Asynchronous"
user = await db.create("users", {
    "name": "John",
    "email": "john@example.com",
})
```

### `.update()` {#update}

Replaces the entire record with the given data. Fields not present in `data` are removed.

```python title="Method Syntax"
db.update(record, data)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>record</code> <Label label="required" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#recordidtype">RecordIdType</a></code></td>
            <td>The table name or <code>RecordID</code> to update.</td>
        </tr>
        <tr>
            <td><code>data</code> <Label label="optional" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#value">Value</a> | None</code></td>
            <td>The new record data. Defaults to <code>None</code>.</td>
        </tr>
    </tbody>
</table>

**Returns:** [`Value`](/docs/sdk/python/api/types/#value)

#### Examples

```python title="Synchronous"
db.update(RecordID("users", "john"), {
    "name": "John Doe",
    "email": "john.doe@example.com",
})
```

```python title="Asynchronous"
await db.update(RecordID("users", "john"), {
    "name": "John Doe",
    "email": "john.doe@example.com",
})
```

### `.upsert()` {#upsert}

Updates an existing record or creates a new one if it does not exist. Replaces the entire record content.

```python title="Method Syntax"
db.upsert(record, data)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>record</code> <Label label="required" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#recordidtype">RecordIdType</a></code></td>
            <td>The table name or <code>RecordID</code> to upsert.</td>
        </tr>
        <tr>
            <td><code>data</code> <Label label="optional" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#value">Value</a> | None</code></td>
            <td>The record data. Defaults to <code>None</code>.</td>
        </tr>
    </tbody>
</table>

**Returns:** [`Value`](/docs/sdk/python/api/types/#value)

#### Examples

```python title="Synchronous"
db.upsert(RecordID("users", "john"), {
    "name": "John",
    "email": "john@example.com",
})
```

```python title="Asynchronous"
await db.upsert(RecordID("users", "john"), {
    "name": "John",
    "email": "john@example.com",
})
```

### `.merge()` {#merge}

Merges the given data into an existing record. Existing fields not present in `data` are preserved.

```python title="Method Syntax"
db.merge(record, data)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>record</code> <Label label="required" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#recordidtype">RecordIdType</a></code></td>
            <td>The table name or <code>RecordID</code> to merge into.</td>
        </tr>
        <tr>
            <td><code>data</code> <Label label="optional" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#value">Value</a> | None</code></td>
            <td>The data to merge. Defaults to <code>None</code>.</td>
        </tr>
    </tbody>
</table>

**Returns:** [`Value`](/docs/sdk/python/api/types/#value)

#### Examples

```python title="Synchronous"
db.merge(RecordID("users", "john"), {
    "age": 32,
})
```

```python title="Asynchronous"
await db.merge(RecordID("users", "john"), {
    "age": 32,
})
```

### `.patch()` {#patch}

Applies JSON Patch operations to a record.

```python title="Method Syntax"
db.patch(record, data)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>record</code> <Label label="required" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#recordidtype">RecordIdType</a></code></td>
            <td>The table name or <code>RecordID</code> to patch.</td>
        </tr>
        <tr>
            <td><code>data</code> <Label label="optional" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#value">Value</a> | None</code></td>
            <td>A list of JSON Patch operations. Defaults to <code>None</code>.</td>
        </tr>
    </tbody>
</table>

**Returns:** [`Value`](/docs/sdk/python/api/types/#value)

#### Examples

```python title="Synchronous"
db.patch(RecordID("users", "john"), [
    {"op": "replace", "path": "/email", "value": "new@example.com"},
    {"op": "add", "path": "/verified", "value": True},
])
```

```python title="Asynchronous"
await db.patch(RecordID("users", "john"), [
    {"op": "replace", "path": "/email", "value": "new@example.com"},
])
```

### `.delete()` {#delete}

Deletes all records in a table, or a specific record by its ID.

```python title="Method Syntax"
db.delete(record)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>record</code> <Label label="required" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#recordidtype">RecordIdType</a></code></td>
            <td>The table name or <code>RecordID</code> to delete.</td>
        </tr>
    </tbody>
</table>

**Returns:** [`Value`](/docs/sdk/python/api/types/#value)

#### Examples

```python title="Synchronous"
db.delete(RecordID("users", "john"))

db.delete("temp_data")
```

```python title="Asynchronous"
await db.delete(RecordID("users", "john"))
```

---

## Insert Methods

### `.insert()` {#insert}

Inserts one or more records into a table.

```python title="Method Syntax"
db.insert(table, data)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>table</code> <Label label="required" /></td>
            <td><code>str | Table</code></td>
            <td>The table to insert into.</td>
        </tr>
        <tr>
            <td><code>data</code> <Label label="required" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#value">Value</a></code></td>
            <td>A single record dict or a list of record dicts to insert.</td>
        </tr>
    </tbody>
</table>

**Returns:** [`Value`](/docs/sdk/python/api/types/#value)

#### Examples

```python title="Synchronous"
db.insert("users", {"name": "Alice", "email": "alice@example.com"})

db.insert("users", [
    {"name": "Bob", "email": "bob@example.com"},
    {"name": "Charlie", "email": "charlie@example.com"},
])
```

```python title="Asynchronous"
await db.insert("users", {"name": "Alice", "email": "alice@example.com"})
```

### `.insert_relation()` {#insert-relation}

Inserts one or more relation records into a relation table.

```python title="Method Syntax"
db.insert_relation(table, data)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>table</code> <Label label="required" /></td>
            <td><code>str | Table</code></td>
            <td>The relation table to insert into.</td>
        </tr>
        <tr>
            <td><code>data</code> <Label label="required" /></td>
            <td><code><a href="/docs/sdk/python/api/types/#value">Value</a></code></td>
            <td>A single relation dict or a list of relation dicts. Each must include <code>in</code> and <code>out</code> fields.</td>
        </tr>
    </tbody>
</table>

**Returns:** [`Value`](/docs/sdk/python/api/types/#value)

#### Examples

```python title="Synchronous"
db.insert_relation("likes", {
    "in": RecordID("users", "alice"),
    "out": RecordID("posts", "post1"),
    "created_at": "2025-01-01T00:00:00Z",
})
```

```python title="Asynchronous"
await db.insert_relation("likes", {
    "in": RecordID("users", "alice"),
    "out": RecordID("posts", "post1"),
})
```

---

## Live Queries

> [!NOTE]
> Live queries require a WebSocket connection (`ws://` or `wss://`). HTTP and embedded connections raise `UnsupportedFeatureError`.

### `.live()` {#live}

Initiates a live query for a table. Returns a UUID that identifies the live query and can be passed to `.subscribe_live()` and `.kill()`.

```python title="Method Syntax"
db.live(table, diff)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>table</code> <Label label="required" /></td>
            <td><code>str | Table</code></td>
            <td>The table to watch for changes.</td>
        </tr>
        <tr>
            <td><code>diff</code> <Label label="optional" /></td>
            <td><code>bool</code></td>
            <td>If <code>True</code>, notifications include JSON Patch diffs instead of full records. Defaults to <code>False</code>.</td>
        </tr>
    </tbody>
</table>

**Returns:** `UUID`

#### Examples

```python title="Synchronous"
query_uuid = db.live("users")

query_uuid = db.live("users", diff=True)
```

```python title="Asynchronous"
query_uuid = await db.live("users")
```

### `.subscribe_live()` {#subscribe-live}

Returns a generator that yields live query notifications for the given query UUID. Each notification is a dict containing the action (`"CREATE"`, `"UPDATE"`, `"DELETE"`), the record data, and the record ID.

```python title="Method Syntax"
db.subscribe_live(query_uuid)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>query_uuid</code> <Label label="required" /></td>
            <td><code>str | UUID</code></td>
            <td>The UUID of the live query returned by <a href="#live"><code>.live()</code></a>.</td>
        </tr>
    </tbody>
</table>

**Returns (sync):** `Generator[dict[str, Value], None, None]`
**Returns (async):** `AsyncGenerator[dict[str, Value], None]`

#### Examples

```python title="Synchronous"
query_uuid = db.live("users")

for notification in db.subscribe_live(query_uuid):
    print(notification["action"], notification["result"])
```

```python title="Asynchronous"
query_uuid = await db.live("users")

async for notification in db.subscribe_live(query_uuid):
    print(notification["action"], notification["result"])
```

### `.kill()` {#kill}

Terminates a running live query by its UUID.

```python title="Method Syntax"
db.kill(query_uuid)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>query_uuid</code> <Label label="required" /></td>
            <td><code>str | UUID</code></td>
            <td>The UUID of the live query to kill.</td>
        </tr>
    </tbody>
</table>

**Returns:** `None`

#### Examples

```python title="Synchronous"
db.kill(query_uuid)
```

```python title="Asynchronous"
await db.kill(query_uuid)
```

---

## Sessions

> [!NOTE]
> Sessions require a WebSocket connection (`ws://` or `wss://`). HTTP and embedded connections raise `UnsupportedFeatureError`.

Sessions allow you to create isolated contexts on a single connection, each with its own namespace, database, variables, and authentication state.

### `.new_session()` {#new-session}

Creates a new isolated session on the current connection.

```python title="Method Syntax"
db.new_session()
```

**Returns (sync):** `BlockingSurrealSession`
**Returns (async):** `AsyncSurrealSession`

#### Examples

```python title="Synchronous"
session = db.new_session()
session.use("other_ns", "other_db")
result = session.select("users")
```

```python title="Asynchronous"
session = await db.new_session()
await session.use("other_ns", "other_db")
result = await session.select("users")
```

### `.attach()` {#attach}

Attaches to the server-side session associated with this connection and returns its session ID.

```python title="Method Syntax"
db.attach()
```

**Returns:** `UUID`

#### Examples

```python title="Synchronous"
session_id = db.attach()
```

```python title="Asynchronous"
session_id = await db.attach()
```

### `.detach()` {#detach}

Detaches from a server-side session.

```python title="Method Syntax"
db.detach(session_id)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>session_id</code> <Label label="required" /></td>
            <td><code>UUID</code></td>
            <td>The session ID to detach from.</td>
        </tr>
    </tbody>
</table>

**Returns:** `None`

#### Examples

```python title="Synchronous"
db.detach(session_id)
```

```python title="Asynchronous"
await db.detach(session_id)
```

---

## Transactions

> [!NOTE]
> Transactions require a WebSocket connection (`ws://` or `wss://`). HTTP and embedded connections raise `UnsupportedFeatureError`.

Transactions let you group multiple operations into an atomic unit. Changes are only applied when the transaction is committed, and can be rolled back with cancel.

### `.begin()` {#begin}

Begins a new transaction, optionally within a specific session.

```python title="Method Syntax"
db.begin(session_id)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>session_id</code> <Label label="optional" /></td>
            <td><code>UUID | None</code></td>
            <td>The session to start the transaction in. If <code>None</code>, uses the default session. Defaults to <code>None</code>.</td>
        </tr>
    </tbody>
</table>

**Returns:** `UUID` — the transaction ID

#### Examples

```python title="Synchronous"
txn_id = db.begin()
```

```python title="Asynchronous"
txn_id = await db.begin()
```

```python title="Within a session"
session_id = db.attach()
txn_id = db.begin(session_id)
```

### `.commit()` {#commit}

Commits a transaction, applying all changes made within it.

```python title="Method Syntax"
db.commit(txn_id, session_id)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>txn_id</code> <Label label="required" /></td>
            <td><code>UUID</code></td>
            <td>The transaction ID returned by <a href="#begin"><code>.begin()</code></a>.</td>
        </tr>
        <tr>
            <td><code>session_id</code> <Label label="optional" /></td>
            <td><code>UUID | None</code></td>
            <td>The session the transaction belongs to. Defaults to <code>None</code>.</td>
        </tr>
    </tbody>
</table>

**Returns:** `None`

#### Examples

```python title="Synchronous"
txn_id = db.begin()
db.query("CREATE users SET name = 'Alice'")
db.commit(txn_id)
```

```python title="Asynchronous"
txn_id = await db.begin()
await db.query("CREATE users SET name = 'Alice'")
await db.commit(txn_id)
```

### `.cancel()` {#cancel}

Cancels a transaction, discarding all changes made within it.

```python title="Method Syntax"
db.cancel(txn_id, session_id)
```

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>txn_id</code> <Label label="required" /></td>
            <td><code>UUID</code></td>
            <td>The transaction ID returned by <a href="#begin"><code>.begin()</code></a>.</td>
        </tr>
        <tr>
            <td><code>session_id</code> <Label label="optional" /></td>
            <td><code>UUID | None</code></td>
            <td>The session the transaction belongs to. Defaults to <code>None</code>.</td>
        </tr>
    </tbody>
</table>

**Returns:** `None`

#### Examples

```python title="Synchronous"
txn_id = db.begin()
db.query("DELETE users")
db.cancel(txn_id)
```

```python title="Asynchronous"
txn_id = await db.begin()
await db.query("DELETE users")
await db.cancel(txn_id)
```

---

## Context Manager

Both `Surreal` and `AsyncSurreal` support the context manager protocol. The connection is automatically opened on entry and closed on exit.

### Synchronous

```python title="Synchronous context manager"
from surrealdb import Surreal

with Surreal("ws://localhost:8000") as db:
    db.use("my_namespace", "my_database")
    db.signin({"username": "root", "password": "root"})
    users = db.select("users")
```

### Asynchronous

```python title="Asynchronous context manager"
from surrealdb import AsyncSurreal

async with AsyncSurreal("ws://localhost:8000") as db:
    await db.use("my_namespace", "my_database")
    await db.signin({"username": "root", "password": "root"})
    users = await db.select("users")
```

---

## Complete Example

```python title="Full workflow (sync)"
from surrealdb import Surreal, RecordID

with Surreal("ws://localhost:8000") as db:
    db.use("shop", "inventory")
    db.signin({"username": "root", "password": "root"})

    db.create("products", {"name": "Laptop", "price": 999.99})
    db.create("products", {"name": "Mouse", "price": 29.99})

    products = db.select("products")
    print("All products:", products)

    cheap = db.query(
        "SELECT * FROM products WHERE price < $max",
        {"max": 100},
    )
    print("Affordable:", cheap)

    db.merge(RecordID("products", products[0]["id"].id), {"stock": 50})

    db.delete(RecordID("products", products[1]["id"].id))
```

```python title="Full workflow (async)"
import asyncio
from surrealdb import AsyncSurreal, RecordID

async def main():
    async with AsyncSurreal("ws://localhost:8000") as db:
        await db.use("shop", "inventory")
        await db.signin({"username": "root", "password": "root"})

        await db.create("products", {"name": "Laptop", "price": 999.99})

        products = await db.select("products")
        print("Products:", products)

asyncio.run(main())
```

---

## See Also

- [SurrealSession](/docs/sdk/python/api/core/surreal-session) — Session management reference
- [SurrealTransaction](/docs/sdk/python/api/core/surreal-transaction) — Transaction reference
- [Data Types](/docs/sdk/python/api/types) — Type aliases and value types
- [Errors](/docs/sdk/python/api/errors) — Error classes reference
- [Connecting to SurrealDB](/docs/sdk/python/concepts/connecting-to-surrealdb) — Connection protocols and patterns
