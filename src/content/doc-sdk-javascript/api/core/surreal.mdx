---
sidebar_position: 1
sidebar_label: Surreal
title: JavaScript | SDK | API Reference | Surreal
description: The Surreal class is the main entry point for connecting to and interacting with a SurrealDB instance.
---

import Label from "@components/shared/Label.astro";

# `Surreal` {#surreal}

The `Surreal` class is the primary interface for connecting to a SurrealDB instance, managing connections, executing queries, and handling database sessions. It extends [`SurrealSession`](/docs/sdk/javascript/api/core/surreal-session) and inherits all session management and query execution capabilities.

By default, a `Surreal` instance operates with a default session scope, but you can create additional isolated sessions using the session management methods.

**Extends:** [`SurrealSession`](/docs/sdk/javascript/api/core/surreal-session) â†’ [`SurrealQueryable`](/docs/sdk/javascript/api/core/surreal-queryable)

**Source:** [api/surreal.ts](https://github.com/surrealdb/surrealdb.js/blob/main/packages/sdk/src/api/surreal.ts)

## Constructor

### Syntax
```ts title="Constructor Syntax"
new Surreal(options?)
```

### Parameters

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>options</code> <Label label="optional" /></td>
            <td><code><a href="/docs/sdk/javascript/api/types/#driveroptions">DriverOptions</a></code></td>
            <td>Driver-wide configuration options for customizing engines, codecs, and implementations.</td>
        </tr>
    </tbody>
</table>

### Examples

```ts title="Basic Usage"
import { Surreal } from 'surrealdb';

const db = new Surreal();
```

```ts title="With Custom Options"
import { Surreal } from 'surrealdb';

const db = new Surreal({
    codecOptions: {
        useNativeDates: true // Use native Date objects instead of DateTime
    }
});
```

## Properties

### `status` {#status}

Returns the current connection status.

**Type:** [`ConnectionStatus`](/docs/sdk/javascript/api/types/#connectionstatus)

**Values:** `"disconnected"` | `"connecting"` | `"reconnecting"` | `"connected"`

**Example:**
```ts
console.log(db.status); // "connected"
```

### `isConnected` {#isconnected}

Returns whether the connection is currently established. This is equivalent to checking if `status === "connected"`.

**Type:** `boolean`

**Example:**
```ts
if (db.isConnected) {
    console.log('Database is connected');
}
```

### `ready` {#ready}

A promise that resolves when the connection is established and ready, or rejects if a connection error occurs.

**Type:** `Promise<void>`

**Example:**
```ts
await db.ready;
console.log('Connection is ready');
```

### Inherited Properties

The `Surreal` class inherits all properties from [`SurrealSession`](/docs/sdk/javascript/api/core/surreal-session), including:

- `namespace` - Current namespace
- `database` - Current database
- `accessToken` - Current access token
- `parameters` - Session parameters
- `session` - Session ID
- `isValid` - Session validity status

## Connection Methods

### `.connect()` {#connect}

Connect to a local or remote SurrealDB instance.

> [!WARNING]
> Calling `connect()` will reset and dispose of any existing sessions created with `newSession()`.

```ts title="Method Syntax"
db.connect(url, opts?)
```

#### Parameters
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>url</code> <Label label="required" /></td>
            <td><code>string | URL</code></td>
            <td>The endpoint URL to connect to (e.g., <code>"ws://localhost:8000"</code>, <code>"http://localhost:8000/rpc"</code>).</td>
        </tr>
        <tr>
            <td><code>opts</code> <Label label="optional" /></td>
            <td><code><a href="/docs/sdk/javascript/api/types/#connectoptions">ConnectOptions</a></code></td>
            <td>Connection-specific options such as namespace, database, and authentication.</td>
        </tr>
    </tbody>
</table>

#### Returns
`Promise<true>` - Resolves to `true` when connection is successful

#### Examples

```ts title="WebSocket Connection"
await db.connect('ws://localhost:8000');
```

```ts title="HTTP Connection"
await db.connect('http://localhost:8000/rpc');
```

```ts title="With Namespace and Database"
await db.connect('ws://localhost:8000', {
    namespace: 'my_namespace',
    database: 'my_database'
});
```

```ts title="With Authentication"
await db.connect('ws://localhost:8000', {
    namespace: 'my_namespace',
    database: 'my_database',
    authentication: {
        username: 'root',
        password: 'root'
    }
});
```

```ts title="With Custom Reconnect Options"
await db.connect('ws://localhost:8000', {
    reconnect: {
        enabled: true,
        attempts: 10,
        retryDelay: 1000,
        retryDelayMax: 10000,
        retryDelayMultiplier: 2
    }
});
```

### `.close()` {#close}

Disconnect from the active SurrealDB instance.

```ts title="Method Syntax"
db.close()
```

#### Returns
`Promise<true>` - Resolves to `true` when disconnection is successful

#### Example
```ts
await db.close();
console.log('Connection closed');
```

### `.health()` {#health}

Check the health status of the connected SurrealDB instance.

```ts title="Method Syntax"
db.health()
```

#### Returns
`Promise<void>` - Resolves if the instance is healthy, rejects otherwise

#### Example
```ts
try {
    await db.health();
    console.log('Database is healthy');
} catch (error) {
    console.error('Health check failed:', error);
}
```

### `.version()` {#version}

Retrieve version information from the connected SurrealDB instance.

```ts title="Method Syntax"
db.version()
```

#### Returns
[`Promise<VersionInfo>`](/docs/sdk/javascript/api/types/#versioninfo) - An object containing version information

#### Example
```ts
const info = await db.version();
console.log(info.version); // "surrealdb-2.1.0"
```

### `.isFeatureSupported()` {#isfeatureSupported}

Check whether a specific feature is available in the current connection.

```ts title="Method Syntax"
db.isFeatureSupported(feature)
```

#### Parameters
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>feature</code> <Label label="required" /></td>
            <td><code>Feature</code></td>
            <td>A feature from the <code>Features</code> object (e.g. <code>Features.LiveQueries</code>, <code>Features.Api</code>).</td>
        </tr>
    </tbody>
</table>

#### Returns
`boolean` - `true` if the feature is supported, `false` otherwise

#### Example
```ts
import { Surreal, Features } from 'surrealdb';

if (db.isFeatureSupported(Features.LiveQueries)) {
    console.log('Live queries are supported');
}
```

## Session Management Methods

### `.sessions()` {#sessions}

List all active sessions on the current connection.

```ts title="Method Syntax"
db.sessions()
```

#### Returns
`Promise<Uuid[]>` - An array of session IDs

#### Example
```ts
const sessionIds = await db.sessions();
console.log('Active sessions:', sessionIds);
```

### `.newSession()` {#newsession}

Create a new isolated session on the current connection. The new session will have its own namespace, database, variables, and authentication state, but will share the same connection.

Sessions are automatically restored when the connection reconnects. Call `reset()` on the returned session to destroy it.

```ts title="Method Syntax"
db.newSession()
```

#### Returns
`Promise<SurrealSession>` - A new [`SurrealSession`](/docs/sdk/javascript/api/core/surreal-session) instance

#### Example
```ts
// Create a new isolated session
const session = await db.newSession();

// Use different namespace/database in the new session
await session.use({ namespace: 'other_ns', database: 'other_db' });

// Query in the new session context
const results = await session.select('users');

// Destroy the session when done
await session.reset();
```

### `.closeSession()` {#closesession}

Close the primary session. This is equivalent to calling [`close()`](#close) on the connection.

```ts title="Method Syntax"
db.closeSession()
```

#### Returns
`Promise<void>` - Resolves when the session is closed

#### Example
```ts
await db.closeSession();
```

## Data Management Methods

### `.export()` {#export}

Export the database contents as a SQL string.

```ts title="Method Syntax"
db.export(options?)
```

#### Parameters
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>options</code> <Label label="optional" /></td>
            <td><code><a href="/docs/sdk/javascript/api/types/#sqlexportoptions">SqlExportOptions</a></code></td>
            <td>Options to customize what gets exported.</td>
        </tr>
    </tbody>
</table>

#### Returns
`Promise<string>` - The exported database as a SQL string

#### Examples

```ts title="Export Everything"
const sql = await db.export();
```

```ts title="Export Only Specific Tables"
const sql = await db.export({
    tables: ['users', 'posts'],
    records: true
});
```

```ts title="Export Schema Only (No Records)"
const sql = await db.export({
    records: false,
    tables: true,
    functions: true
});
```

### `.import()` {#import}

Import database contents from a SQL string.

```ts title="Method Syntax"
db.import(input)
```

#### Parameters
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>input</code> <Label label="required" /></td>
            <td><code>string</code></td>
            <td>The SQL string to import into the database.</td>
        </tr>
    </tbody>
</table>

#### Returns
`Promise<void>` - Resolves when the import is complete

#### Example
```ts
const sqlData = `
    DEFINE TABLE users SCHEMAFULL;
    DEFINE FIELD name ON users TYPE string;
    CREATE users:john SET name = 'John Doe';
`;

await db.import(sqlData);
console.log('Data imported successfully');
```

## Events

The `Surreal` class implements the `EventPublisher` interface and emits various events during the connection lifecycle. Subscribe to events using the [`subscribe()`](#subscribe) method.

### `connecting` {#event-connecting}

Emitted when the connection attempt starts.

**Payload:** None

**Example:**
```ts
const unsubscribe = db.subscribe('connecting', () => {
    console.log('Connecting to database...');
});
```

### `connected` {#event-connected}

Emitted when the connection is successfully established.

**Payload:** `[version: string]` - The SurrealDB version string

**Example:**
```ts
db.subscribe('connected', (version) => {
    console.log('Connected to SurrealDB version:', version);
});
```

### `reconnecting` {#event-reconnecting}

Emitted when the connection is attempting to reconnect after being disconnected.

**Payload:** None

**Example:**
```ts
db.subscribe('reconnecting', () => {
    console.log('Attempting to reconnect...');
});
```

### `disconnected` {#event-disconnected}

Emitted when the connection is closed.

**Payload:** None

**Example:**
```ts
db.subscribe('disconnected', () => {
    console.log('Disconnected from database');
});
```

### `error` {#event-error}

Emitted when a connection error occurs.

**Payload:** `[error: Error]` - The error object

**Example:**
```ts
db.subscribe('error', (error) => {
    console.error('Connection error:', error.message);
});
```

### Inherited Events

The `Surreal` class also inherits and re-emits events from [`SurrealSession`](/docs/sdk/javascript/api/core/surreal-session):

- `auth` - Emitted when authentication state changes
- `using` - Emitted when namespace/database changes

### `.subscribe()` {#subscribe}

Subscribe to connection and session events.

```ts title="Method Syntax"
db.subscribe(event, listener)
```

#### Parameters
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>event</code> <Label label="required" /></td>
            <td><code>keyof <a href="/docs/sdk/javascript/api/types/#surrealevents">SurrealEvents</a></code></td>
            <td>The event name to subscribe to.</td>
        </tr>
        <tr>
            <td><code>listener</code> <Label label="required" /></td>
            <td><code>Function</code></td>
            <td>Callback function invoked when the event is emitted.</td>
        </tr>
    </tbody>
</table>

#### Returns
`() => void` - An unsubscribe function to remove the event listener

#### Example
```ts
const unsubscribe = db.subscribe('connected', (version) => {
    console.log('Connected:', version);
});

// Later, unsubscribe from the event
unsubscribe();
```

## Inherited Methods

As `Surreal` extends [`SurrealSession`](/docs/sdk/javascript/api/core/surreal-session), it inherits all authentication and query methods:

### Authentication Methods
- [`signup()`](/docs/sdk/javascript/api/core/surreal-session#signup) - Sign up a new user
- [`signin()`](/docs/sdk/javascript/api/core/surreal-session#signin) - Sign in with credentials
- [`authenticate()`](/docs/sdk/javascript/api/core/surreal-session#authenticate) - Authenticate with a token
- [`invalidate()`](/docs/sdk/javascript/api/core/surreal-session#invalidate) - Invalidate the session

### Session Configuration Methods
- [`use()`](/docs/sdk/javascript/api/core/surreal-session#use) - Set namespace and database
- [`set()`](/docs/sdk/javascript/api/core/surreal-session#set) - Set a session parameter
- [`unset()`](/docs/sdk/javascript/api/core/surreal-session#unset) - Remove a session parameter
- [`reset()`](/docs/sdk/javascript/api/core/surreal-session#reset) - Reset the session

### Query Methods

As `Surreal` extends [`SurrealQueryable`](/docs/sdk/javascript/api/core/surreal-queryable) (via `SurrealSession`), it also inherits all query execution methods:

- [`query()`](/docs/sdk/javascript/api/core/surreal-queryable#query) - Execute raw SurrealQL
- [`select()`](/docs/sdk/javascript/api/core/surreal-queryable#select) - Select records
- [`create()`](/docs/sdk/javascript/api/core/surreal-queryable#create) - Create records
- [`insert()`](/docs/sdk/javascript/api/core/surreal-queryable#insert) - Insert records
- [`update()`](/docs/sdk/javascript/api/core/surreal-queryable#update) - Update records
- [`upsert()`](/docs/sdk/javascript/api/core/surreal-queryable#upsert) - Upsert records
- [`delete()`](/docs/sdk/javascript/api/core/surreal-queryable#delete) - Delete records
- [`relate()`](/docs/sdk/javascript/api/core/surreal-queryable#relate) - Create graph relationships
- [`live()`](/docs/sdk/javascript/api/core/surreal-queryable#live) - Subscribe to live queries
- [`run()`](/docs/sdk/javascript/api/core/surreal-queryable#run) - Execute functions

### Transaction Method
- [`beginTransaction()`](/docs/sdk/javascript/api/core/surreal-transaction) - Start a transaction

## Type Parameters

This class does not use generic type parameters.

## Complete Example

```ts
import { Surreal } from 'surrealdb';

// Create and connect
const db = new Surreal({
    codecOptions: {
        useNativeDates: true
    }
});

// Subscribe to connection events
db.subscribe('connecting', () => console.log('Connecting...'));
db.subscribe('connected', (version) => console.log('Connected:', version));
db.subscribe('error', (error) => console.error('Error:', error));

// Connect to database
await db.connect('ws://localhost:8000', {
    namespace: 'my_namespace',
    database: 'my_database',
    authentication: {
        username: 'root',
        password: 'root'
    }
});

// Check connection status
console.log('Connected:', db.isConnected); // true
console.log('Status:', db.status); // "connected"

// Get version info
const version = await db.version();
console.log('Version:', version.version);

// Execute queries (inherited from SurrealSession/SurrealQueryable)
const users = await db.select('users');
console.log('Users:', users);

// Create a new isolated session
const session = await db.newSession();
await session.use({ namespace: 'other_ns', database: 'other_db' });
const otherData = await session.select('data');

// Export database
const backup = await db.export({ records: true });
console.log('Backup size:', backup.length);

// Close connection
await db.close();
```

## See Also

- [SurrealSession](/docs/sdk/javascript/api/core/surreal-session) - Session management and authentication
- [SurrealQueryable](/docs/sdk/javascript/api/core/surreal-queryable) - Query execution methods
- [SurrealTransaction](/docs/sdk/javascript/api/core/surreal-transaction) - Transaction support
- [Connection Engines](/docs/sdk/javascript/engines/) - Engine-specific documentation
- [Data Types](/docs/sdk/javascript/data-types) - Working with data types
