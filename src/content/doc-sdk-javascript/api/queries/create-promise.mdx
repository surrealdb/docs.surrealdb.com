---
sidebar_position: 3
sidebar_label: CreatePromise
title: JavaScript | SDK | API Reference | CreatePromise
description: CreatePromise provides chainable methods for configuring CREATE operations.
---

import Label from "@components/shared/Label.astro";

# `CreatePromise<T, I, J>` {#createpromise}

The `CreatePromise` class provides a chainable interface for configuring CREATE operations before execution. It extends `Promise`, allowing you to `await` it directly or chain configuration methods.

**Returned by:** [`SurrealQueryable.create()`](/docs/sdk/javascript/api/core/surreal-queryable#create)

**Source:** [query/create.ts](https://github.com/surrealdb/surrealdb.js/blob/main/packages/sdk/src/query/create.ts)

## Type Parameters

- `T` - The result type
- `I` - The input type for record data
- `J` - Boolean indicating if result is JSON (default: `false`)

## Configuration Methods

### `.content()` {#content}

Set the complete content for the new record.

```ts title="Method Syntax"
createPromise.content(data)
```

#### Parameters
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>data</code> <Label label="required" /></td>
            <td><code>Values&lt;I&gt;</code></td>
            <td>The record data (excluding id field).</td>
        </tr>
    </tbody>
</table>

#### Returns
`CreatePromise<T, I, J>` - Chainable promise

#### Examples

```ts title="Create with Specific ID"
const user = await db.create(new RecordId('users', 'john'))
    .content({
        name: 'John Doe',
        email: 'john@example.com',
        age: 30
    });
```

```ts title="Create with Auto-Generated ID"
const user = await db.create(new Table('users'))
    .content({
        name: 'Jane Doe',
        email: 'jane@example.com',
        age: 28
    });
```

---

### `.patch()` {#patch}

Apply JSON Patch operations to set record data.

```ts title="Method Syntax"
createPromise.patch(operations)
```

#### Parameters
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>operations</code> <Label label="required" /></td>
            <td><code>Values&lt;I&gt;</code></td>
            <td>JSON Patch operations to apply.</td>
        </tr>
    </tbody>
</table>

#### Returns
`CreatePromise<T, I, J>` - Chainable promise

#### Example

```ts
const user = await db.create(new Table('users'))
    .patch([
        { op: 'add', path: '/name', value: 'John' },
        { op: 'add', path: '/email', value: 'john@example.com' }
    ]);
```

---

### `.output()` {#output}

Specify which fields to return in the response.

```ts title="Method Syntax"
createPromise.output(fields)
```

#### Parameters
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>fields</code> <Label label="required" /></td>
            <td><code>Output</code></td>
            <td>Output specification: <code>"NONE"</code>, <code>"BEFORE"</code>, <code>"AFTER"</code>, <code>"DIFF"</code>, or field list.</td>
        </tr>
    </tbody>
</table>

#### Returns
`CreatePromise<T, I, J>` - Chainable promise

#### Examples

```ts title="Return Specific Fields"
const user = await db.create(new Table('users'))
    .content(userData)
    .output('id', 'name');
// Returns only id and name
```

```ts title="Return Full Record"
const user = await db.create(new Table('users'))
    .content(userData)
    .output('AFTER');
// Returns complete created record
```

```ts title="Return Nothing"
await db.create(new Table('logs'))
    .content(logData)
    .output('NONE');
// Returns undefined, useful for fire-and-forget
```

---

### `.timeout()` {#timeout}

Set a timeout for the operation.

```ts title="Method Syntax"
createPromise.timeout(duration)
```

#### Parameters
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>duration</code> <Label label="required" /></td>
            <td><code><a href="/docs/sdk/javascript/api/values/duration">Duration</a></code></td>
            <td>Maximum time to wait for operation completion.</td>
        </tr>
    </tbody>
</table>

#### Returns
`CreatePromise<T, I, J>` - Chainable promise

#### Example

```ts
const user = await db.create(new Table('users'))
    .content(userData)
    .timeout(Duration.parse('5s'));
```

---

### `.version()` {#version}

Create the record at a specific version (for versioned storage engines).

```ts title="Method Syntax"
createPromise.version(timestamp)
```

#### Parameters
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>timestamp</code> <Label label="required" /></td>
            <td><code><a href="/docs/sdk/javascript/api/values/datetime">DateTime</a></code></td>
            <td>The version timestamp.</td>
        </tr>
    </tbody>
</table>

#### Returns
`CreatePromise<T, I, J>` - Chainable promise

#### Example

```ts
const user = await db.create(new Table('users'))
    .content(userData)
    .version(DateTime.now());
```

---

### `.json()` {#json}

Return result as JSON string instead of parsed object.

```ts title="Method Syntax"
createPromise.json()
```

#### Returns
`CreatePromise<T, I, true>` - Promise returning JSON string

#### Example

```ts
const jsonString = await db.create(new Table('users'))
    .content(userData)
    .json();
```

---

### `.stream()` {#stream}

Stream the operation result (useful when creating multiple records).

```ts title="Method Syntax"
createPromise.stream()
```

#### Returns
`AsyncIterableIterator` - Async iterator

#### Example

```ts
const results = db.create(new Table('users'))
    .content(multipleUsers);
    
for await (const user of results.stream()) {
    console.log('Created:', user);
}
```

## Complete Examples

### Basic Creation

```ts
import { Surreal, RecordId, Table } from 'surrealdb';

const db = new Surreal();
await db.connect('ws://localhost:8000');

// Create with specific ID
const user = await db.create(new RecordId('users', 'john'))
    .content({
        name: 'John Doe',
        email: 'john@example.com',
        role: 'admin'
    });

// Create with auto-generated ID
const post = await db.create(new Table('posts'))
    .content({
        title: 'Hello World',
        content: 'My first post',
        author: new RecordId('users', 'john')
    });
```

### Creation with Output Control

```ts
// Only return the ID
const { id } = await db.create(new Table('users'))
    .content(userData)
    .output('id');

// Return specific fields
const summary = await db.create(new Table('users'))
    .content(userData)
    .output('id', 'name', 'created_at');
```

### Bulk Creation with Streaming

```ts
const users = [
    { name: 'Alice', email: 'alice@example.com' },
    { name: 'Bob', email: 'bob@example.com' },
    { name: 'Carol', email: 'carol@example.com' }
];

for await (const user of db.create(new Table('users')).content(users).stream()) {
    console.log(`Created user: ${user.name} with ID: ${user.id}`);
}
```

### With Relationships

```ts
const post = await db.create(new Table('posts'))
    .content({
        title: 'New Post',
        content: 'Post content here',
        author: new RecordId('users', 'john'),
        tags: [
            new RecordId('tags', 'javascript'),
            new RecordId('tags', 'tutorial')
        ],
        created_at: DateTime.now()
    });
```

### Error Handling

```ts
try {
    const user = await db.create(new RecordId('users', 'existing'))
        .content(userData);
} catch (error) {
    if (error instanceof ResponseError) {
        console.error('User already exists:', error.message);
    }
}
```

### With Timeout

```ts
const user = await db.create(new Table('users'))
    .content(complexUserData)
    .timeout(Duration.parse('10s'));
```

## Chaining Pattern

All configuration methods return a new `CreatePromise`, allowing method chaining:

```ts
const result = await db.create(new Table('users'))
    .content(userData)
    .output('id', 'name', 'email')
    .timeout(Duration.parse('5s'));
```

## See Also

- [SurrealQueryable.create()](/docs/sdk/javascript/api/core/surreal-queryable#create) - Method that returns CreatePromise
- [InsertPromise](/docs/sdk/javascript/api/queries/insert-promise) - Bulk insertion
- [UpsertPromise](/docs/sdk/javascript/api/queries/upsert-promise) - Insert or replace
- [Query Overview](/docs/sdk/javascript/api/queries/) - All query builder classes
