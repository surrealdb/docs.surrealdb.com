---
sidebar_position: 4
sidebar_label: Duration
title: JavaScript | SDK | API Reference | Duration
description: Time duration values with support for multiple units and nanosecond precision.
---

import Label from "@components/shared/Label.astro";

# `Duration` {#duration}

The `Duration` class provides time duration values with nanosecond precision and support for human-readable formats like `"5h30m"`.

**Import:**
```ts
import { Duration } from 'surrealdb';
```

**Source:** [value/duration.ts](https://github.com/surrealdb/surrealdb.js/blob/main/packages/sdk/src/value/duration.ts)

## Constructor

### `new Duration(value)` {#constructor}

Create a new duration value.

```ts title="Syntax"
new Duration(duration) // Clone existing
new Duration(string) // Parse human-readable string
new Duration([seconds, nanoseconds]) // From tuple
```

#### Parameters
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>value</code> <Label label="required" /></td>
            <td><code>Duration | string | [bigint, bigint]</code></td>
            <td>Value to create duration from.</td>
        </tr>
    </tbody>
</table>

#### Examples

```ts
// Parse human-readable durations
const fiveMinutes = new Duration('5m');
const oneHour = new Duration('1h');
const complex = new Duration('2h30m15s');
const precise = new Duration('1s500ms250us125ns');

// From tuple [seconds, nanoseconds]
const duration = new Duration([300n, 0n]); // 5 minutes

// Clone existing
const clone = new Duration(fiveMinutes);
```

## Supported Units

<table>
    <thead>
        <tr>
            <th>Unit</th>
            <th>Symbol</th>
            <th>Example</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Nanoseconds</td>
            <td><code>ns</code></td>
            <td><code>"500ns"</code></td>
        </tr>
        <tr>
            <td>Microseconds</td>
            <td><code>us</code>, <code>Âµs</code></td>
            <td><code>"250us"</code></td>
        </tr>
        <tr>
            <td>Milliseconds</td>
            <td><code>ms</code></td>
            <td><code>"100ms"</code></td>
        </tr>
        <tr>
            <td>Seconds</td>
            <td><code>s</code></td>
            <td><code>"30s"</code></td>
        </tr>
        <tr>
            <td>Minutes</td>
            <td><code>m</code></td>
            <td><code>"5m"</code></td>
        </tr>
        <tr>
            <td>Hours</td>
            <td><code>h</code></td>
            <td><code>"2h"</code></td>
        </tr>
        <tr>
            <td>Days</td>
            <td><code>d</code></td>
            <td><code>"7d"</code></td>
        </tr>
        <tr>
            <td>Weeks</td>
            <td><code>w</code></td>
            <td><code>"4w"</code></td>
        </tr>
        <tr>
            <td>Years</td>
            <td><code>y</code></td>
            <td><code>"1y"</code></td>
        </tr>
    </tbody>
</table>

## Static Methods

### `Duration.parse(string)` {#parse}

Parse a duration from a human-readable string.

```ts title="Syntax"
Duration.parse(str)
```

#### Parameters
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>str</code> <Label label="required" /></td>
            <td><code>string</code></td>
            <td>Duration string (e.g., <code>"5h30m"</code>).</td>
        </tr>
    </tbody>
</table>

#### Returns
`Duration` - Parsed duration

#### Examples

```ts
// Simple durations
const fiveMinutes = Duration.parse('5m');
const oneHour = Duration.parse('1h');
const oneDay = Duration.parse('1d');

// Combined units
const sessionTimeout = Duration.parse('2h30m');
const cacheExpiry = Duration.parse('1d12h');
const precise = Duration.parse('1h30m45s500ms');

// Very precise
const measurement = Duration.parse('1s250ms500us750ns');
```

## Instance Methods

### `.toMilliseconds()` {#tomilliseconds}

Convert duration to milliseconds.

```ts title="Syntax"
duration.toMilliseconds()
```

#### Returns
`number` - Duration in milliseconds

#### Example

```ts
const duration = Duration.parse('5m30s');
console.log(duration.toMilliseconds()); // 330000
```

---

### `.toSeconds()` {#toseconds}

Convert duration to seconds.

```ts title="Syntax"
duration.toSeconds()
```

#### Returns
`number` - Duration in seconds

#### Example

```ts
const duration = Duration.parse('2h30m');
console.log(duration.toSeconds()); // 9000
```

---

### `.toString()` {#tostring}

Convert to human-readable string.

```ts title="Syntax"
duration.toString()
```

#### Returns
`string` - Human-readable duration string

#### Example

```ts
const duration = Duration.parse('2h30m15s');
console.log(duration.toString()); // '2h30m15s'
```

---

### `.toJSON()` {#tojson}

Serialize for JSON.

```ts title="Syntax"
duration.toJSON()
```

#### Returns
`string` - Duration string for JSON

---

### `.plus(duration)` {#plus}

Add another duration.

```ts title="Syntax"
duration.plus(other)
```

#### Parameters
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>other</code> <Label label="required" /></td>
            <td><code>Duration</code></td>
            <td>Duration to add.</td>
        </tr>
    </tbody>
</table>

#### Returns
`Duration` - Sum of durations

#### Example

```ts
const base = Duration.parse('1h');
const extra = Duration.parse('30m');
const total = base.plus(extra);
console.log(total.toString()); // '1h30m'
```

---

### `.minus(duration)` {#minus}

Subtract another duration.

```ts title="Syntax"
duration.minus(other)
```

#### Returns
`Duration` - Difference of durations

---

### `.equals(other)` {#equals}

Check if two durations are equal.

```ts title="Syntax"
duration.equals(other)
```

#### Returns
`boolean` - True if equal

## Complete Examples

### Timeouts and Expiration

```ts
import { Surreal, Duration, DateTime, Table } from 'surrealdb';

const db = new Surreal();
await db.connect('ws://localhost:8000');

// Set session timeout
const session = await db.create(new Table('sessions')).content({
    user: userId,
    created_at: DateTime.now(),
    timeout: Duration.parse('24h')
});

// Calculate expiration
const expiresAt = session.created_at.plus(session.timeout);
```

### Query Timeouts

```ts
// Set timeout on queries
const users = await db.select(new Table('users'))
    .timeout(Duration.parse('5s'));

// Timeout on complex query
const result = await db.query(`
    SELECT * FROM complex_view
`).timeout(Duration.parse('30s')).collect();
```

### Rate Limiting

```ts
// Define rate limit window
const rateLimit = {
    window: Duration.parse('1m'),
    maxRequests: 100
};

// Store rate limit data
await db.create(new Table('rate_limits')).content({
    user: userId,
    window: rateLimit.window,
    requests: 1,
    window_start: DateTime.now()
});
```

### Scheduled Tasks

```ts
// Schedule task with delay
const task = await db.create(new Table('tasks')).content({
    name: 'Send email',
    delay: Duration.parse('5m'),
    created_at: DateTime.now()
});

// Calculate execution time
const executeAt = task.created_at.plus(task.delay);

console.log('Execute at:', executeAt.toString());
```

### Cache TTL

```ts
// Set cache entry with TTL
const cacheEntry = await db.create(new Table('cache')).content({
    key: 'user:123',
    value: userData,
    ttl: Duration.parse('1h'),
    cached_at: DateTime.now()
});

// Check if cache is still valid
function isCacheValid(entry: typeof cacheEntry): boolean {
    const expiresAt = entry.cached_at.plus(entry.ttl);
    return DateTime.now().getTime() < expiresAt.getTime();
}
```

### Performance Measurement

```ts
// Measure operation duration
const start = DateTime.now();

// ... perform operation ...

const end = DateTime.now();
const elapsed = Duration.parse(
    `${end.getTime() - start.getTime()}ms`
);

console.log('Operation took:', elapsed.toString());
```

### Conversion Examples

```ts
// Parse from string
const duration = Duration.parse('2h30m');

// Convert to milliseconds
const ms = duration.toMilliseconds(); // 9000000

// Convert to seconds
const seconds = duration.toSeconds(); // 9000

// Back to string
const str = duration.toString(); // '2h30m'

// Arithmetic
const doubled = duration.plus(duration);
console.log(doubled.toString()); // '5h'
```

### Complex Durations

```ts
// Very precise timing
const precise = Duration.parse('1s500ms250us125ns');

// Multiple units
const complex = Duration.parse('1d2h30m15s');

// Arithmetic
const extended = complex.plus(Duration.parse('12h'));
console.log(extended.toString()); // '1d14h30m15s'
```

## Best Practices

### 1. Use Human-Readable Formats

```ts
// Good: Clear intent
const timeout = Duration.parse('30s');
const cacheTTL = Duration.parse('1h');

// Avoid: Raw numbers
const timeout = new Duration([30n, 0n]);
```

### 2. Use Duration for Time Arithmetic

```ts
// Good: Type-safe duration arithmetic
const now = DateTime.now();
const future = now.plus(Duration.parse('1h'));

// Avoid: Manual millisecond math
const future = new DateTime(now.getTime() + 3600000);
```

### 3. Store Durations in Database

```ts
// Good: Store as Duration for type safety
await db.create(table).content({
    timeout: Duration.parse('24h')
});

// Avoid: Store as number
await db.create(table).content({
    timeout: 86400000 // What unit is this?
});
```

### 4. Use Appropriate Units

```ts
// Good: Use largest appropriate unit
const oneDay = Duration.parse('1d');
const oneWeek = Duration.parse('1w');

// Avoid: Unnecessary smaller units
const oneDay = Duration.parse('24h');
const oneWeek = Duration.parse('168h');
```

## See Also

- [DateTime](/docs/sdk/javascript/api/values/datetime) - Datetime values
- [Data Types Overview](/docs/sdk/javascript/api/values/) - All custom data types
- [Query Builders](/docs/sdk/javascript/api/queries/) - Using Duration in queries
- [SurrealQL Duration](/docs/surrealql/datamodel/datetimes#durations) - Database duration type
