---
sidebar_position: 1
sidebar_label: Errors
title: JavaScript | SDK | API Reference | Errors
description: Error classes for handling different types of failures in the SDK.
---

# Errors

The SDK defines specific error classes for different failure scenarios. All error classes extend the base `SurrealError` class, allowing you to catch and handle specific error types.

## Base Error

### `SurrealError` {#surrealerror}

Base class for all SDK errors.

**Extends:** `Error`

**Example:**
```ts
try {
    await db.select(new RecordId('users', 'john'));
} catch (error) {
    if (error instanceof SurrealError) {
        console.error('SDK error:', error.message);
    }
}
```

## Connection Errors

### `ConnectionUnavailableError` {#connectionunavailableerror}

Thrown when attempting an operation without an active connection.

**Message:** `"You must be connected to a SurrealDB instance before performing this operation"`

**Example:**
```ts
const db = new Surreal();

try {
    await db.select(new Table('users')); // Not connected
} catch (error) {
    if (error instanceof ConnectionUnavailableError) {
        console.error('Not connected to database');
        await db.connect('ws://localhost:8000');
    }
}
```

---

### `HttpConnectionError` {#httpconnectionerror}

Thrown when an HTTP connection fails.

**Properties:**
- `status` (number) - HTTP status code
- `statusText` (string) - HTTP status text
- `buffer` (ArrayBuffer) - Response buffer

**Example:**
```ts
try {
    await db.connect('http://localhost:8000/rpc');
} catch (error) {
    if (error instanceof HttpConnectionError) {
        console.error(`HTTP ${error.status}: ${error.statusText}`);
    }
}
```

---

### `CallTerminatedError` {#callterminatederror}

Thrown when a call is terminated because the connection was closed.

**Message:** `"The call has been terminated because the connection was closed"`

**Example:**
```ts
try {
    const promise = db.query('SELECT SLEEP(10s)');
    await db.close(); // Close connection while query running
    await promise; // Will throw CallTerminatedError
} catch (error) {
    if (error instanceof CallTerminatedError) {
        console.error('Connection closed during operation');
    }
}
```

---

### `UnexpectedConnectionError` {#unexpectedconnectionerror}

Thrown when an unexpected connection error occurs.

**Properties:**
- `cause` (unknown) - The underlying error cause

**Example:**
```ts
try {
    await db.connect('ws://invalid:8000');
} catch (error) {
    if (error instanceof UnexpectedConnectionError) {
        console.error('Connection error:', error.cause);
    }
}
```

---

### `UnsupportedEngineError` {#unsupportedengineerror}

Thrown when attempting to use an unsupported or unconfigured engine.

**Properties:**
- `engine` (string) - The unsupported engine name

**Example:**
```ts
try {
    await db.connect('custom://localhost:8000');
} catch (error) {
    if (error instanceof UnsupportedEngineError) {
        console.error(`Engine "${error.engine}" is not supported`);
    }
}
```

## Reconnection Errors

### `ReconnectExhaustionError` {#reconnectexhaustionerror}

Thrown when reconnect attempts have been exhausted.

**Message:** `"The reconnect attempts have been exhausted"`

**Example:**
```ts
db.subscribe('error', (error) => {
    if (error instanceof ReconnectExhaustionError) {
        console.error('Failed to reconnect after multiple attempts');
        // Implement custom reconnection logic
    }
});
```

---

### `ReconnectIterationError` {#reconnectiterationerror}

Thrown when a reconnect iterator fails to iterate.

**Message:** `"The reconnect iterator failed to iterate"`

## Response Errors

### `ServerError` {#servererror}

Thrown when a database query or RPC call fails with an error response from the server. Provides structured error information with `kind`, `details`, and optional cause chaining. For the wire format, see the [RPC protocol Error Handling](/docs/surrealdb/integration/rpc#error-handling) documentation.

**Properties:**
- `kind` (string) - Error category (e.g. `"NotAllowed"`, `"NotFound"`, `"Validation"`)
- `message` (string) - Human-readable error description
- `code` (number) - Legacy numeric error code (for backward compatibility; prefer `kind`)
- `details` (object | string | undefined) - Structured details specific to the error kind
- `cause` (ServerError | undefined) - The underlying error in the chain

**Methods:**
- `hasKind(kind: string): boolean` - Returns whether this error or any error in the cause chain matches the given kind
- `findCause(kind: string): ServerError | undefined` - Returns the first error in the cause chain matching the given kind

**Example:**
```ts
import { ServerError, NotAllowedError, NotFoundError } from "surrealdb";

try {
    await db.query("SELECT * FROM users");
} catch (error) {
    if (error instanceof NotAllowedError) {
        if (error.isTokenExpired) {
            await db.signin({ /* re-authenticate */ });
        } else {
            console.error("Permission denied:", error.message);
        }
    } else if (error instanceof NotFoundError) {
        console.error("Table not found:", error.tableName);
    } else if (error instanceof ServerError) {
        console.error(`Server error [${error.kind}]: ${error.message}`);
    }
}
```

**Backward compatibility:** `ResponseError` is a deprecated alias for `ServerError`. The SDK accepts both old (code-only) and new (kind + details) error formats from the server. Prefer `ServerError` or the typed subclasses below, and use `error.kind` instead of `error.code` for branching logic.

---

### `ResponseError` {#responseerror}

Deprecated alias for [`ServerError`](#servererror). Use `ServerError` or the typed subclasses for new code.

### Typed server error subclasses

The SDK provides subclasses of `ServerError` for each error `kind`, with typed accessors for common detail patterns. Use `instanceof` checks to narrow the type and access these properties.

#### `ErrorKind` constants {#errorkind}

Import and use `ErrorKind` for string comparisons:

```ts
import { ErrorKind } from "surrealdb";

ErrorKind.Validation
ErrorKind.Configuration
ErrorKind.Thrown
ErrorKind.Query
ErrorKind.Serialization
ErrorKind.NotAllowed
ErrorKind.NotFound
ErrorKind.AlreadyExists
ErrorKind.Connection
ErrorKind.Internal
```

#### `ValidationError` {#validationerror}

**Kind:** `"Validation"`. Invalid input, parse error, or bad parameters.

**Accessors:** `isParseError` (boolean), `parameterName` (string | undefined)

#### `NotAllowedError` {#notallowederror}

**Kind:** `"NotAllowed"`. Permission or authorization error.

**Accessors:** `isTokenExpired`, `isInvalidAuth`, `isScriptingBlocked` (boolean), `methodName`, `functionName` (string | undefined)

#### `NotFoundError` {#notfounderror}

**Kind:** `"NotFound"`. Resource not found (table, record, method, namespace, database).

**Accessors:** `tableName`, `recordId`, `methodName`, `namespaceName`, `databaseName` (string | undefined)

#### `QueryError` {#queryerror}

**Kind:** `"Query"`. Query execution failure (timeout, cancelled, not executed).

**Accessors:** `isNotExecuted`, `isTimedOut`, `isCancelled` (boolean), `timeout` (`{ secs: number; nanos: number } | undefined`)

#### `AlreadyExistsError` {#alreadyexistserror}

**Kind:** `"AlreadyExists"`. Duplicate resource (record, table, namespace).

#### `ThrownError` {#thrownerror}

**Kind:** `"Thrown"`. User-thrown error from a SurrealQL `THROW` statement.

#### `ConfigurationError` {#configurationerror}

**Kind:** `"Configuration"`. Feature or configuration not supported (e.g. live queries disabled, bad GraphQL config).

#### `SerializationError` {#serializationerror}

**Kind:** `"Serialization"`. Serialization or deserialization failure.

**Accessors:** `isDeserialization` (boolean)

#### `InternalError` {#internalerror}

**Kind:** `"Internal"`. Unexpected server error; catch-all for unknown failures.

---

### `UnexpectedServerResponseError` {#unexpectedserverresponseerror}

Thrown when the server returns an unexpected response format.

**Properties:**
- `response` (unknown) - The unexpected response received

**Example:**
```ts
try {
    await db.query(complexQuery);
} catch (error) {
    if (error instanceof UnexpectedServerResponseError) {
        console.error('Unexpected response:', error.response);
    }
}
```

## Authentication Errors

### `AuthenticationError` {#authenticationerror}

Thrown when authentication fails.

**Message:** `"Authentication did not succeed"`

**Properties:**
- `cause` (unknown) - The underlying error cause

**Example:**
```ts
try {
    await db.signin({
        username: 'user',
        password: 'wrongpassword'
    });
} catch (error) {
    if (error instanceof AuthenticationError) {
        console.error('Authentication failed:', error.cause);
    }
}
```

---

### `MissingNamespaceDatabaseError` {#missingnamespacedatabaseerror}

Thrown when a namespace and/or database is required but not selected.

**Message:** `"There is no namespace and/or database selected"`

**Example:**
```ts
const db = new Surreal();
await db.connect('ws://localhost:8000');

try {
    await db.select(new Table('users')); // No namespace/database set
} catch (error) {
    if (error instanceof MissingNamespaceDatabaseError) {
        await db.use({ namespace: 'test', database: 'test' });
    }
}
```

## Live Query Errors

### `LiveSubscriptionError` {#livesubscriptionerror}

Thrown when a live subscription fails to listen.

**Message:** `"Live subscription failed to listen"`

**Properties:**
- `cause` (unknown) - The underlying error cause

**Example:**
```ts
try {
    const subscription = await db.live(new Table('users'));
} catch (error) {
    if (error instanceof LiveSubscriptionError) {
        console.error('Live query failed:', error.cause);
    }
}
```

## Version Errors

### `UnsupportedVersionError` {#unsupportedversionerror}

Thrown when the connected SurrealDB version is not supported by the SDK.

**Properties:**
- `version` (string) - The unsupported version
- `minimum` (string) - Minimum supported version (inclusive)
- `maximum` (string) - Maximum supported version (exclusive)

**Example:**
```ts
try {
    await db.connect('ws://localhost:8000', {
        versionCheck: true
    });
} catch (error) {
    if (error instanceof UnsupportedVersionError) {
        console.error(
            `Version ${error.version} not supported. ` +
            `Requires: >= ${error.minimum} < ${error.maximum}`
        );
    }
}
```

## Expression Errors

### `ExpressionError` {#expressionerror}

Thrown when an expression fails to compile or execute.

**Example:**
```ts
try {
    const invalid = expr(() => {
        throw new Error('Invalid expression');
    });
} catch (error) {
    if (error instanceof ExpressionError) {
        console.error('Expression error:', error.message);
    }
}
```

---

### `PublishError` {#publisherror}

Thrown when one or more event subscribers throw an error during publication.

**Properties:**
- `causes` (unknown[]) - The errors thrown by subscribers
- `message` (string) - Summary message including the cause messages

**Example:**
```ts
db.subscribe('auth', () => {
    throw new Error('Handler failed');
});
// When the event fires, a PublishError may be emitted
```

---

### `InvalidDateError` {#invaliddateerror}

Thrown when a parsed date is invalid.

**Message:** `"The provided date is invalid"`

**Example:**
```ts
try {
    DateTime.parse('not-a-date');
} catch (error) {
    if (error instanceof InvalidDateError) {
        console.error('Invalid date:', error.message);
    }
}
```

## Feature Errors

### `UnsupportedFeatureError` {#unsupportedfeatureerror}

Thrown when attempting to use a feature not supported by the configured engine.

**Properties:**
- `feature` (Feature) - The unsupported feature

**Example:**
```ts
try {
    // Attempt to use a feature not supported by server
    await db.api().get('/endpoint');
} catch (error) {
    if (error instanceof UnsupportedFeatureError) {
        console.error(`Feature "${error.feature.name}" not supported`);
    }
}
```

---

### `UnavailableFeatureError` {#unavailablefeatureerror}

Thrown when attempting to use a feature not available in the connected SurrealDB version.

**Properties:**
- `feature` (Feature) - The unavailable feature
- `version` (string) - The connected SurrealDB version

**Example:**
```ts
try {
    await db.connect('http://localhost:8000/rpc'); // HTTP engine
    await db.live(new Table('users')); // Live queries require WebSocket
} catch (error) {
    if (error instanceof UnavailableFeatureError) {
        console.error(`Feature "${error.feature.name}" not available in version ${error.version}`);
    }
}
```

## API Errors

### `UnsuccessfulApiError` {#unsuccessfulapierror}

Thrown when a user-defined API call fails.

**Properties:**
- `path` (string) - The API path that was invoked
- `method` (string) - The HTTP method used
- `response` (ApiResponse) - The error response from the API (includes `body?`, `headers?`, `status?`)
- `message` (string) - Human-readable message (inherited from Error; includes path, method, and status)

**Example:**
```ts
try {
    await db.api().get('/users/999');
} catch (error) {
    if (error instanceof UnsuccessfulApiError) {
        console.error(`API error: ${error.message}`);
        console.error(`Status: ${error.response.status}`);
    }
}
```

## Session Errors

### `InvalidSessionError` {#invalidsessionerror}

Thrown when attempting to use an invalid or disposed session.

**Properties:**
- `session` (Session) - The invalid session identifier

**Example:**
```ts
const session = await db.newSession();
await session.closeSession();

try {
    await session.select(new Table('users')); // Session closed
} catch (error) {
    if (error instanceof InvalidSessionError) {
        console.error('Session is no longer valid');
    }
}
```

## Error Handling Patterns

### Basic Error Handling

```ts
try {
    const result = await db.select(new Table('users'));
} catch (error) {
    if (error instanceof SurrealError) {
        // Handle all SDK errors
        console.error('SDK error:', error.message);
    } else {
        // Handle other errors
        console.error('Unexpected error:', error);
    }
}
```

### Specific Error Handling

```ts
try {
    await db.connect('ws://localhost:8000');
    await db.use({ namespace: 'test', database: 'test' });
    await db.signin({ username: 'user', password: 'pass' });
} catch (error) {
    if (error instanceof ConnectionUnavailableError) {
        console.error('Cannot connect to database');
    } else if (error instanceof AuthenticationError) {
        console.error('Invalid credentials');
    } else if (error instanceof UnsupportedVersionError) {
        console.error('Database version incompatible');
    } else {
        console.error('Unknown error:', error);
    }
}
```

### Error Recovery

```ts
async function executeWithRetry(fn: () => Promise<any>, maxRetries = 3) {
    for (let attempt = 0; attempt < maxRetries; attempt++) {
        try {
            return await fn();
        } catch (error) {
            if (error instanceof ConnectionUnavailableError) {
                // Reconnect and retry
                await db.connect('ws://localhost:8000');
                continue;
            } else if (error instanceof ServerError && attempt < maxRetries - 1) {
                // Retry on server errors (e.g. transient failures)
                continue;
            }
            throw error;
        }
    }
}

const result = await executeWithRetry(() => 
    db.select(new Table('users'))
);
```

### Global Error Handler

```ts
db.subscribe('error', (error) => {
    if (error instanceof ReconnectExhaustionError) {
        // Handle reconnection failure
        notifyUser('Connection lost. Please check your network.');
    } else if (error instanceof UnexpectedConnectionError) {
        // Log unexpected errors
        logger.error('Unexpected connection error:', error.cause);
    }
});
```

## Best Practices

### 1. Catch Specific Errors

Handle specific error types for better error recovery:

```ts
// Good: Specific handling with typed server errors
try {
    await db.query("SELECT * FROM users");
} catch (error) {
    if (error instanceof NotAllowedError) {
        if (error.isTokenExpired) await db.signin({ /* ... */ });
        else console.error("Permission denied:", error.message);
    } else if (error instanceof NotFoundError) {
        console.error("Missing resource:", error.tableName ?? error.recordId);
    } else if (error instanceof AuthenticationError) {
        redirectToLogin();
    } else if (error instanceof ConnectionUnavailableError) {
        showConnectionError();
    }
}

// Avoid: Generic handling
try {
    await operation();
} catch (error) {
    console.error(error); // Lost context
}
```

### 2. Use Type Guards

TypeScript type guards provide better type safety:

```ts
function isConnectionError(error: unknown): error is ConnectionUnavailableError {
    return error instanceof ConnectionUnavailableError;
}

if (isConnectionError(error)) {
    // TypeScript knows error is ConnectionUnavailableError
    await reconnect();
}
```

### 3. Inspect the cause chain

Use `hasKind()` and `findCause()` when errors wrap an underlying cause:

```ts
try {
    await db.query("SELECT * FROM secrets");
} catch (error) {
    if (error instanceof ServerError && error.hasKind("NotAllowed")) {
        const authError = error.findCause("NotAllowed");
        if (authError instanceof NotAllowedError && authError.isTokenExpired) {
            await db.signin({ /* re-authenticate */ });
        }
    }
}
```

### 4. Log Error Details

Include error details in logs for debugging:

```ts
catch (error) {
    if (error instanceof ServerError) {
        logger.error('Query failed', {
            kind: error.kind,
            message: error.message,
            details: error.details,
            query: originalQuery
        });
    }
}
```

### 5. Clean Up on Error

Ensure resources are cleaned up even when errors occur:

```ts
const session = await db.newSession();
try {
    await session.select(new Table('users'));
} finally {
    await session.closeSession(); // Always clean up
}
```

## See Also

- [RPC Protocol â€” Error Handling](/docs/surrealdb/integration/rpc#error-handling) - Wire format and error kinds reference
- [Core Classes](/docs/sdk/javascript/api/core/) - Classes that may throw errors
- [Surreal](/docs/sdk/javascript/api/core/surreal) - Connection methods that may throw errors
- [SurrealSession](/docs/sdk/javascript/api/core/surreal-session) - Session methods that may throw errors

**Source:** [errors.ts](https://github.com/surrealdb/surrealdb.js/blob/main/packages/sdk/src/errors.ts)
