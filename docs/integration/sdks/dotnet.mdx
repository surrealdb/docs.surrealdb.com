---
sidebar_position: 8
---

import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

# .NET

<br /><br />

<ThemedImage
  alt="DotNet"
  width="50"
  className="sdk-logo"
  sources={{
    light: useBaseUrl('img/light/dotnet.png'),
    dark: useBaseUrl('img/dotnet-icon.png'),
  }}
/>

# .NET SDK for SurrealDB

<br />

The SurrealDB SDK for .NET enables simple and advanced querying of a remote database from client or server-side code. Remote connections automatically reconnect when the connection is terminated.

To contribute to this documentation, edit this file on GitHub.

To contribute to the SDK code, submit an Issue or Pull Request here.

<br />

### Install the SDK

&bull; Create a new project using your favorite IDE (Visual Studio, JetBrains Rider, etc...) 

&bull; or use the dotnet new command.

Once ready, add the SurrealDB SDK to your dependencies:

```
dotnet add package SurrealDb.Net
```

<br />

### Connect to SurrealDB

Let's start by creating a new console app.

```sh
dotnet new console -o SurrealDbExample
cd SurrealDbExample
dotnet add package SurrealDb.Net
```

Open Program.cs and replace everything in there with the following code to try out some basic operations using the SurrealDB SDK.

```csharp
using SurrealDb.Net;
using SurrealDb.Net.Models;
using SurrealDb.Net.Models.Auth;
using System.Text.Json;

var db = new SurrealDbClient("ws://127.0.0.1:8000/rpc");

await db.SignIn(new RootAuth { Username = "root", Password = "root" });
await db.Use("test", "test");

var person = new Person
{
	Title = "Founder & CEO",
	Name = new() { FirstName = "Tobie", LastName = "Morgan Hitchcock" },
	Marketing = true
};
var created = await db.Create("person", person);
Console.WriteLine(ToJsonString(created));

var updated = await db.Merge<ResponsibilityMerge, Person>(
	new() { Id = new Thing("person", "jaime"), Marketing = true }
);
Console.WriteLine(ToJsonString(updated));

var people = await db.Select<Person>("person");
Console.WriteLine(ToJsonString(people));

var queryResponse = await db.Query(
	"SELECT marketing, count() FROM type::table($table) GROUP BY marketing",
	new Dictionary<string, object> { { "table", "person" } } 
);
var groups = queryResponse.GetValue<List<Group>>(0);
Console.WriteLine(ToJsonString(groups));

static string ToJsonString(object? o)
{
	return JsonSerializer.Serialize(o, new JsonSerializerOptions
	{
		WriteIndented = true,
	});
}

public class Person : Record
{
	public string? Title { get; set; }
	public Name? Name { get; set; }
	public bool Marketing { get; set; }
}
public class Name
{
	public string? FirstName { get; set; }
	public string? LastName { get; set; }
}
public class ResponsibilityMerge : Record
{
	public bool Marketing { get; set; }
}
public class Group
{
	public bool Marketing { get; set; }
	public int Count { get; set; }
}
```

Then make sure your SurrealDB server is running on 127.0.0.1:8000 and run your app from the command line with:

```sh
dotnet run
```

<br />

### SDK methods

The .NET SDK comes with a number of built-in functions.

<table>
<thead>
  <tr>
    <th>Function</th>
    <th>Description</th>
  </tr>
</thead>
<tbody>
<tr>
    <td><a href="#surrealdbclient"> <code> new  SurrealDbClient(endpoint)</code></a>  
    </td>
    <td>Creates a new client, detecting the right protocol from the endpoint</td>
</tr>
<tr>
    <td><a href="#surrealdbhttpclient"> <code> SurrealDbHttpClient.New(host)</code></a><l className='grey'>Static</l></td>
    <td>Initialises a client using HTTP protocol</td>
</tr>
<tr>
    <td><a href="#surrealdbhttpsclient"> <code>SurrealDbHttpsClient.New(host)</code></a><l className='grey'>Static</l></td>
    <td>Initialises a client using HTTPS protocol</td>
</tr>
<tr>
    <td><a href="#surrealdbwsclient"> <code>SurrealDbWsClient.New(host)</code></a><l className='grey'>Static</l></td>
    <td>Initialises a client using WS protocol</td>
</tr>
<tr>
    <td><a href="#surrealdbwssclient"> <code>SurrealDbWssClient.New(host)</code></a><l className='grey'>Static</l></td>
    <td>Initialises a client using WSS protocol</td>
</tr>
<tr>
    <td><a href="#configure"> <code> db.Configure(ns,db,credentials) </code></a></td>
    <td>Configures the client to use a specific namespace and database, with credentials</td>
</tr>
<tr>
    <td><a href="#connect"> <code> await db.Connect(url, options) </code></a></td>
    <td>Connects the client to the underlying endpoint, also improving performance to avoid cold starts</td>
</tr>
<tr>
    <td><a href="#use"> <code>await db.Use(ns,db)</code></a></td>
    <td>Switch to a specific namespace and database</td>
</tr>
<tr>
    <td><a href="#signup"> <code>await db.Signup(credentials)</code></a></td>
    <td>Signs up a user to a specific authentication scope</td>
</tr>
<tr>
    <td><a href="#signin"> <code>await db.Signin(credentials)</code></a></td>
    <td>Signs this connection in to a specific authentication scope</td>
</tr>
<tr>
    <td><a href="#authenticate"> <code>await db.Authenticate(token)</code></a></td>
    <td>Authenticates the current connection with a JWT token</td>
</tr>
<tr>
    <td><a href="#invalidate"> <code>await db.Invalidate()</code></a></td>
    <td>Invalidates the authentication for the current connection</td>
</tr>
<tr>
    <td><a href="#set"> <code>await db.Set(key,val)</code></a></td>
    <td>Assigns a value as a parameter for this connection</td>
</tr>
<tr>
    <td><a href="#unset"> <code>await db.Unset(key)</code></a></td>
    <td>Removes a parameter for this connection</td>
</tr>
<tr>
    <td><a href="#query"> <code>await db.Query(sql,params)</code></a></td>
    <td>Runs a set of SurrealQL statements against the database</td>
</tr>
<tr>
    <td><a href="#select"> <code>await db.Select(resource)</code></a></td>
    <td>Selects all records in a table, or a specific record</td>
</tr>
<tr>
    <td><a href="#create"> <code>await db.Create(resource,data)</code></a></td>
    <td>Creates a record in the database</td>
</tr>
<tr>
    <td><a href="#upsert"> <code>await db.Upsert(data)</code></a></td>
    <td>Creates or updates a specific record</td>
</tr>
<tr>
    <td><a href="#merge"> <code>await db.Merge(resource,data)</code></a></td>
    <td>Modifies all records in a table, or a specific record</td>
</tr>
<tr>
    <td><a href="#delete"> <code>await db.Delete(resource,data)</code></a></td>
    <td>Deletes all records, or a specific record</td>
</tr>
<tr>
    <td><a href="#version"> <code>await db.Version()</code></a></td>
    <td>Retrieves the version of the SurrealDB instance</td>
</tr>
<tr>
    <td><a href="#health"> <code>await db.Health()</code></a></td>
    <td>Checks the status of the database server and storage engine</td>
</tr>
</tbody>
</table>

<br />

## `SurrealDbClient` {#surrealdbclient}

Creates a new client, detecting the right protocol from the endpoint.

```csharp title="Method Syntax"
new SurrealDbClient(endpoint)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>endpoint</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database endpoint to connect to.
            </td>
        </tr>
                <tr>
            <td colspan="2">
                <code>httpClientFactory</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                An IHttpClientFactory instance.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
// Creates a new client using a local endpoint
var db = new SurrealDbClient("http://127.0.0.1:8000");

// Creates a new client using a remote endpoint
var db = new SurrealDbClient("wss://cloud.surrealdb.com");
```

<br />

## `SurrealDbHttpClient` {#surrealdbhttpclient}

Initialises a client using HTTP protocol.

```csharp title="Method Syntax"
SurrealDbHttpClient.new(host)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>host</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database host to connect to.
            </td>
        </tr>
                <tr>
            <td colspan="2">
                <code>httpClientFactory</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                An IHttpClientFactory instance.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
var db = SurrealDbHttpClient.New("127.0.0.1:8000");
```

<br />

## `SurrealDbHttpsClient` {#surrealdbhttpsclient}

Initialises a client using HTTPS protocol.

```csharp title="Method Syntax"
SurrealDbHttpsClient.new(host)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>host</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database host to connect to.
            </td>
        </tr>
                <tr>
            <td colspan="2">
                <code>httpClientFactory</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                An IHttpClientFactory instance.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
var db = SurrealDbHttpClient.New("cloud.surrealdb.com");
```

<br />

## `SurrealDbWsClient` {#surrealdbwsclient}

Initialises a client using WS protocol.

```csharp title="Method Syntax"
SurrealDbWsClient.New(host)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>host</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database host to connect to.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>ns</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The table namespace to connect to.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>db</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The table database to connect to.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>username</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The username to connect to (with root access).
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>password</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The password to connect to (with root access).
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
var db = SurrealDbWsClient.New("127.0.0.1:8000");
```

<br />

## `SurrealDbWssClient` {#surrealdbwssclient}

Initialises a client using WSS protocol.

```csharp title="Method Syntax"
SurrealDbWssClient.New(host)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>host</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database host to connect to.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>ns</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The table namespace to connect to.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>db</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The table database to connect to.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>username</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The username to connect to (with root access).
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>password</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The password to connect to (with root access).
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
var db = SurrealDbWssClient.New("cloud.surrealdb.com");
```

<br />

## `.Configure()` {#configure}

Configures the client to use a specific namespace and database, with credentials.

```csharp title="Method Syntax"
db.Configure(ns, db, credentials)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>ns</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The table namespace to use.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>db</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The table database to use.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>username</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The username with root access.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>password</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The password with root access.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>token</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The value of the JWT token.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
// Configure a connection to use ns/db
client.Configure("ns", "db");

// Configure a connection to use ns/db, as well as root access (with username and password)
client.Configure("ns", "db", "root", "root");

// Configure a connection to use ns/db, as well as user auth via JWT token
string token = "eyJhbGciOiJIUzI1...";
client.Configure("ns", "db", token);
```

<br />

## `.Connect()` {#connect}

Connects the client to the underlying endpoint, also improving performance to avoid cold starts.

```csharp title="Method Syntax"
await db.Connect()
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
await db.Connect();
```

<br />

## `.Use()` {#use}

Switch to a specific namespace and database.

```csharp title="Method Syntax"
await db.Use(ns, db)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>ns</code>
                <l className='yellow'>INITIALLY REQUIRED</l>
            </td>
            <td>
                Switches to a specific namespace.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>db</code>
                <l className='yellow'>INITIALLY REQUIRED</l>
            </td>
            <td>
                Switches to a specific database.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='yellow'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
await db.Use("test", "test");
```

<br />

## `.SignUp()` {#signup}

Signs up to a specific authentication scope.

```csharp title="Method Syntax"
await db.SignUp(credentials)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>credentials</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Credentials to sign up as a scoped user.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```csharp
var authParams = new AuthParams
{
    Namespace = "test",
    Database = "test",
    Scope = "user",
    Email = "info@surrealdb.com",
    Password = "123456"
};

Jwt jwt = await db.SignUp(authParams);

public class AuthParams : ScopeAuth
{
	public string? Username { get; set; }
	public string? Email { get; set; }
	public string? Password { get; set; }
}
```

<br />

## `.SignIn()` {#signin}

Signs in to a specific authentication scope.

```csharp title="Method Syntax"
await db.SignIn(credentials)
```


### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>credentials</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Variables used in a signin query.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
// Option 1: Sign in as root user
await db.SignIn(new RootAuth { Username = "root", Password = "root" });

// Option 2: Sign in using namespace auth
await db.SignIn(
    new NamespaceAuth
    {
        Namespace = "test", 
        Username = "johndoe", 
        Password = "password123" 
    }
);

// Option 3: Sign in using database auth
await db.SignIn(
    new DatabaseAuth
    {
        Namespace = "test", 
        Database = "test", 
        Username = "johndoe", 
        Password = "password123" 
    }
);

// Option 4: Sign in as a scoped used
var authParams = new AuthParams
{
    Namespace = "test",
    Database = "test",
    Scope = "user",
    Email = "info@surrealdb.com",
    Password = "123456"
};

Jwt jwt = await db.SignIn(authParams);

public class AuthParams : ScopeAuth
{
	public string? Username { get; set; }
	public string? Email { get; set; }
	public string? Password { get; set; }
}
```



## `.Authenticate()` {#authenticate}

Authenticates the current connection with a JWT token.

```csharp title="Method Syntax"
await db.Authenticate(jwt)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>jwt</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The JWT object holder of the authentication token.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
// Sign in or sign up as a scoped user
Jwt jwt = await db.SignUp(authParams);

await db.Authenticate(jwt);
```

<br />

## `.Invalidate()` {#invalidate}

Invalidates the authentication for the current connection.

```csharp title="Method Syntax"
await db.Invalidate()
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Properties</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
db.Invalidate();
```

<br />

## `.Set()` {#set}

Assigns a value as a parameter for this connection.

```csharp title="Method Syntax"
await db.Set(key, val)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>key</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Specifies the name of the variable.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>value</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Assigns the value to the variable name.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
// Assign the variable on the connection
await db.Set("name", new Name { FirstName = "Tobie", LastName = "Morgan Hitchcock" });

// Use the variable in a subsequent query
await db.Query("CREATE person SET name = $name");

// Use the variable in a subsequent query
await db.Query("SELECT * FROM person WHERE name.first_name = $name.first_name");
```

<br />

## `.Unset()` {#unset}

Removes a parameter for this connection.

```csharp title="Method Syntax"
await db.Unset(key)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>key</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Specifies the SurrealQL statements.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
await db.Unset("name");
```

<br />

## `.Query()` {#query}

Runs a set of SurrealQL statements against the database.

```csharp title="Method Syntax"
await db.Query(sql, params)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>sql</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Specifies the SurrealQL statements.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>params</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Assigns variables which can be used in the query.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
// Assign the variable on the connection
var params = new Dictionary<string, object> { { "table", "person" } };
var result = await db.Query("CREATE person; SELECT * FROM type::table($table);", params);

// Get the first result from the first query
var created = result.GetValue<Person>(0);

// Get all of the results from the second query
var people = result.GetValue<List<Person>>(1);
```

<br />

## `.Select()` {#select}

Selects all records in a table, or a specific record, from the database.

```csharp title="Method Syntax"
await db.Select(resource)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or a record ID to select.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
// Select all records from a table
var people = await db.Select<Person>("person");

// Select a specific record from a table
var person = await db.Select<Person>("person", "h5wxrf2ewk8xjxosxtyc");

// Select a specific record from a table, equivalent to the above
var thing = new Thing("person", "h5wxrf2ewk8xjxosxtyc");
var person = await db.Select<Person>(thing);

// Select a specific record from a table, given a non-string id
var thing = Thing.From("person", new Guid("8424486b-85b3-4448-ac8d-5d51083391c7"));
var person = await db.Select<Person>(thing);
```

<br />

## `.Create()` {#create}

Creates a record in the database.

```csharp title="Method Syntax"
await db.Create(resource, data)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to create.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The document / record data to insert.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
// Create a record with a random ID
var person = await db.Create<Person>("person");

// Create a record with a random ID & specific fields
var person = await db.Create("person", new Person { Name = "Tobie" });

// Create a record with a specific ID
var personToCreate = new Person
{
    Id = new Thing("person", "tobie"),
    Name = "Tobie",
    Settings = new Settings
    {
        Active = true,
        Marketing = true,
    },
};
var result = await db.Create(personToCreate);
```


<br />

## `.Upsert()` {#upsert}

Creates or updates a specific record.

```csharp title="Method Syntax"
await db.Upsert(data)
```

:::note
<em>NOTE: </em>This function creates a new document / record or replaces the current one with the specified data.
:::

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The document / record data to insert.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
var person = new Person
{
    Id = new Thing("person", "tobie"), // Id is mandatory to apply create or update
    Name = "Tobie",
    Settings = new Settings
    {
        Active = true,
        Marketing = true,
    },
};

// Create a new record when it doesn't exist
var created = await db.Upsert(person);

// Update an existing record when it does exist
var updated = await db.Upsert(person);
```


<br />

## `.Merge()` {#merge}

Modifies all records in a table, or a specific record.

```csharp title="Method Syntax"
await db.Merge(resource, data)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to modify.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The data with which to modify the records.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
// Only changes the fields specified in the merge object
var merge = new PersonMerge
{
    Id = new Thing("person", "tobie"),
    Settings = new Settings
    {
        Active = true,
        Marketing = false,
    },
};
var result = await db.Merge<PersonMerge, Person>(merge);

// Only changes the fields specified in the Dictionary
var thing = new Thing("person", "tobie");
var data = new Dictionary<string, object>
{
    { "tags", new List<string> { "developer", "engineer" } }
};

var result = await db.Merge<Person>(thing, data);
```


<br />

## `.Delete()` {#delete}

Deletes all records in a table, or a specific record, from the database.

```csharp title="Method Syntax"
await db.Delete(resource)
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or a record ID to select.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
// Delete all records from a table
await db.Delete("person");

// Delete a specific record from a table
await db.Delete("person", "h5wxrf2ewk8xjxosxtyc");

// Delete a specific record from a table, equivalent to the above
var thing = new Thing("person", "h5wxrf2ewk8xjxosxtyc");
await db.Delete(thing);
```


<br />

## `.Version()` {#version}

Retrieves the version of the SurrealDB instance.

```csharp title="Method Syntax"
await db.Version()
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
string version = await db.Version(); // Will return "surrealdb-1.0.0-beta.9+20230402.5eafebd"
```


<br />

## `.Health()` {#health}

Checks the status of the database server and storage engine.

```csharp title="Method Syntax"
await db.Health()
```

### Arguments
<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

### Example usage
```csharp
bool status = await db.Health();
```


<br /><br />

### Dependency Injection

The .NET SDK also support Dependency Injection to ease the use of the SurrealDbClient in your application.

Let's start by creating a new ASP.NET Core web app.

```sh
dotnet new webapp -o SurrealDbWeatherApi
cd SurrealDbWeatherApi
dotnet add package SurrealDb.Net
```

Open appsettings.Development.json and replace everything in there with the following code. We have added a new Connection String called SurrealDB with the default configuration.

```bash
{
  "AllowedHosts": "*",
  "Logging": {
    "LogLevel": {
    "Default": "Information",
    "Microsoft.AspNetCore": "Warning"
    }
  },
  "ConnectionStrings": {
    "SurrealDB": "Server=http://127.0.0.1:8000;Namespace=test;Database=test;Username=root;Password=root"
  }
}
```

Open Program.cs and replace everything in there with the following code. This code is using the AddSurreal() extension method to inject services automatically. Notice that all we have to do is one line of code to configure the SurrealDB client with the previously set Connection String.

:::note
<em>NOTE:</em> By default, this function will register both ISurrealDbClient and SurrealDbClient using the Singleton service lifetime.
:::

```csharp
var builder = WebApplication.CreateBuilder(args);

var services = builder.Services;
var configuration = builder.Configuration;

services.AddControllers();
services.AddEndpointsApiExplorer();
services.AddSwaggerGen();
services.AddSurreal(configuration.GetConnectionString("SurrealDB"));

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
	app.UseSwagger();
	app.UseSwaggerUI();
}

app.UseHttpsRedirection();
app.UseAuthorization();

app.MapControllers();

app.Run();
```

Open WeatherForecastController.cs and replace everything in there with the following code. Finally, we can inject the ISurrealDbClient inside our Controller.

```csharp
using Microsoft.AspNetCore.Mvc;

namespace SurrealDbWeatherApi.Controllers;

[ApiController]
[Route("[controller]")]
public class WeatherForecastController : ControllerBase
{
	private const string Table = "weatherForecast";

	private readonly ISurrealDbClient _surrealDbClient;

	public WeatherForecastController(ISurrealDbClient surrealDbClient)
	{
		_surrealDbClient = surrealDbClient;
	}

	[HttpGet]
	[Route("/")]
	public Task<List<WeatherForecast>> GetAll(CancellationToken cancellationToken)
	{
		return _surrealDbClient.Select<WeatherForecast>(Table, cancellationToken);
	}

	[HttpPost]
	[Route("/")]
	public Task<WeatherForecast> Create(CreateWeatherForecast data, CancellationToken cancellationToken)
	{
		var weatherForecast = new WeatherForecast
		{
			Date = data.Date,
			Country = data.Country,
			TemperatureC = data.TemperatureC,
			Summary = data.Summary
		};

		return _surrealDbClient.Create(Table, weatherForecast, cancellationToken);
	}

    // ...
	// Other methods omitted for brevity
}

public class CreateWeatherForecast
{
	public DateTime Date { get; set; }
	public string? Country { get; set; }
	public int TemperatureC { get; set; }
	public string? Summary { get; set; }
}
```

Then make sure your SurrealDB server is running on 127.0.0.1:8000 and run your app from the command line with:

```sh
dotnet run
```

### Connection Strings

Connection Strings are an easy way to configure your application to connect to a SurrealDB instance. They are stored in the appsettings.json file and can be used to configure the SurrealDbClient.

In general, it is known as a best practice to:
set a development Connection String in appsettings.Development.json,
store your production Connection String in a Secret environment variable, or even better in a Vault.

<table>
    <thead>
        <tr>
            <th colspan="2">Keys</th>
            <th>Description</th>
            <th>Aliases</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>Endpoint</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database endpoint to connect to.
            </td>
            <td colspan="2">
                Server
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>Namespace</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Switches to a specific namespace.
            </td>
            <td colspan="2">
                NS
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>Database</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Switches to a specific database.
            </td>
            <td colspan="2">
                DB
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>Username</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Username used to have root access.
            </td>
            <td colspan="2">
                User
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>Password</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Password used to have root access.
            </td>
            <td colspan="2">
                Pass
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>Token</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Token (JWT) used to have user access.
            </td>
            <td colspan="2">
                
            </td>
        </tr>
    </tbody>
</table>


Here is a couple of examples of Connection Strings:

```sh
Server=http://127.0.0.1:8000;Namespace=test;Database=test;Username=root;Password=root
```

```sh
Endpoint=http://127.0.0.1:8000;NS=test;DB=test;User=root;Pass=root
```