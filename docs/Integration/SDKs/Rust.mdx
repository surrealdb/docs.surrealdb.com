---
sidebar_position: 2
slug: /Integration/sdks/rust
---

import TableComponent from '../../../src/components/TableData/TableComponent';
import { data } from '../../../src/components/TableData/RustSDK/TableData';

# Rust


## Rust SDK for SurrealDB

The SurrealDB SDK for Rust enables simple and advanced querying of a remote or embedded database from a browser or from server-side code. Remote connections automatically reconnect when the connection is terminated.

To contribute to this documentation, edit this file on GitHub.

To contribute to the SDK code, submit an Issue or Pull Request here.

:::note

<em>NOTE:</em> This SDK is compatible with V1.0.0

:::

### Install the SDK

First, create a new project using cargo new and add the SurrealDB SDK to your dependencies:

```bash
cargo add surrealdb
```

### Connect to SurrealDB

Open src/main.rs and replace everything in there with the following code to try out some basic operations using the SurrealDB SDK.

```bash
use serde::{Deserialize, Serialize};
use surrealdb::engine::remote::ws::Ws;
use surrealdb::opt::auth::Root;
use surrealdb::sql::Thing;
use surrealdb::Surreal;

#[derive(Debug, Serialize)]
struct Name<'a> {
    first: &'a str,
    last: &'a str,
}

#[derive(Debug, Serialize)]
struct Person<'a> {
    title: &'a str,
    name: Name<'a>,
    marketing: bool,
}

#[derive(Debug, Serialize)]
struct Responsibility {
    marketing: bool,
}

#[derive(Debug, Deserialize)]
struct Record {
    #[allow(dead_code)]
    id: Thing,
}

#[tokio::main]
async fn main() -> surrealdb::Result<()> {
    // Connect to the server
    let db = Surreal::new::<Ws>("127.0.0.1:8000").await?;

    // Signin as a namespace, database, or root user
    db.signin(Root {
        username: "root",
        password: "root",
    })
    .await?;

    // Select a specific namespace / database
    db.use_ns("test").use_db("test").await?;

    // Create a new person with a random id
    let created: Vec<Record> = db
        .create("person")
        .content(Person {
            title: "Founder & CEO",
            name: Name {
                first: "Tobie",
                last: "Morgan Hitchcock",
            },
            marketing: true,
        })
    .await?;
    dbg!(created);

    // Update a person record with a specific id
    let updated: Option<Record> = db
        .update(("person", "jaime"))
        .merge(Responsibility { marketing: true })
        .await?;
    dbg!(updated);

    // Select all people records
    let people: Vec<Record> = db.select("person").await?;
    dbg!(people);

    // Perform a custom advanced query
    let groups = db
        .query("SELECT marketing, count() FROM type::table($table) GROUP BY marketing")
        .bind(("table", "person"))
        .await?;
    dbg!(groups);

    Ok(())
}
```

To run the example above, you will need to add the following additional dependencies:
```sql
cargo add serde --features derive
cargo add tokio --features macros,rt-multi-thread
Then make sure your SurrealDB server is running on 127.0.0.1:8000 and run your app from the command line with:
```

Then make sure your SurrealDB server is running on 127.0.0.1:8000 and run your app from the command line with:

```
cargo run
```

### SDK methods

The Rust SDK comes with a number of built-in functions.

<TableComponent data={data} />

<div className='layout-group'>

<div id="init" className='code'>
    <span className='class-name'>Surreal</span>
    <span className='punctuation'>::</span>
    <span className='function'>init</span>
    <span>()</span>
</div>

The DB static singleton ensures that a single database instance is available across very large or complicated applications. With the singleton, only one connection to the database is instantiated, and the database connection does not have to be shared across components or controllers. 

```sql
static DB: Lazy<Surreal<Client>> = Lazy::new(Surreal::init);

#[tokio::main]
async fn main() -> surrealdb::Result<()> {
    // Connect to the database
    DB.connect::<Wss>("cloud.surrealdb.com").await?;
    // Select a namespace + database
    DB.use_ns("test").use_db("test").await?;
    // Create or update a specific record
    let tobie: Option<Record> = DB
        .update(("person", "tobie"))
        .content(Person { name: "Tobie" })
        .await?;
    Ok(())
}
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="connect" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>connect</span>
        <span>(endpoint)</span>
    </div>
</div>

Connects to a local or remote database endpoint.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>endpoint</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database endpoint to connect to.
            </td>
        </tr>
    </tbody>
</table>

```sql
// Connect to a local endpoint
DB.connect::<Ws>("127.0.0.1:8000").await?;
// Connect to a remote endpoint
DB.connect::<Wss>("cloud.surrealdb.com").await?;
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="new" className='code'>
        <span>Surreal</span>
        <span>::</span>
        <span className='function'>new</span>
        <span>:: </span>
        <span className="t-generic"> T </span>
        <span>(endpoint)</span>
    </div>
</div>

Connects to a local or remote database endpoint.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>endpoint</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database endpoint to connect to.
            </td>
        </tr>
    </tbody>
</table>

```sql
let db = Surreal::new::<Ws>("127.0.0.1:8000").await?;
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="use_ns" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>use_ns</span>
        <span>(ns)</span>
        <span>.</span>
        <span className='function'>use_db</span>
        <span>(db)</span>
    </div>
</div>

Connects to a local or remote database endpoint.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>ns</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Switches to a specific namespace.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>db</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Switches to a specific database.
            </td>
        </tr>
    </tbody>
</table>

```sql
db.use_ns("test").use_db("test").await?;
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="signup" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>signup</span>
        <span>(credentials)</span>
    </div>
</div>

Signs up to a specific authentication scope.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>credentials</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Variables used in a signup query.
            </td>
        </tr>
    </tbody>
</table>

```sql
use serde::Serialize;
use surrealdb::opt::auth::Scope;

#[derive(Serialize)]
struct Credentials<'a> {
    email: &'a str,
    pass: &'a str,
}

let jwt = db.signup(Scope {
    namespace: "test",
    database: "test",
    scope: "user",
    params: Credentials {
        email: "info@surrealdb.com",
        pass: "123456",
    },
}).await?;

// ⚠️: It is important to note that the token should be handled securely and protected from unauthorized access.
let token = jwt.as_insecure_token();
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="signin" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>signin</span>
        <span>(credentials)</span>
    </div>
</div>

Signs in to a specific authentication scope.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>credentials</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Variables used in a signin query.
            </td>
        </tr>
    </tbody>
</table>

```sql
use serde::Serialize;
use surrealdb::opt::auth::Scope;

#[derive(Serialize)]
struct Credentials<'a> {
    email: &'a str,
    pass: &'a str,
}

let jwt = db.signin(Scope {
    namespace: "test",
    database: "test",
    scope: "user",
    params: Credentials {
        email: "info@surrealdb.com",
        pass: "123456",
    },
}).await?;

// ⚠️: It is important to note that the token should be handled securely and protected from unauthorized access.
let token = jwt.as_insecure_token();
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="invalidate" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>invalidate</span>
        <span>(credentials)</span>
    </div>
</div>

Invalidates the authentication for the current connection.

```sql
db.invalidate().await?;
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="authenticate" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>authenticate</span>
        <span>(token)</span>
    </div>
</div>

Authenticates the current connection with a JWT token.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>token</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The JWT authentication token.
            </td>
        </tr>
    </tbody>
</table>

```sql
db.authenticate(jwt).await?;
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="set" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>set</span>
        <span>(key, val)</span>
    </div>
</div>

Assigns a value as a parameter for this connection.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>key</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Specifies the name of the variable.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>val</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Assigns the value to the variable name.
            </td>
        </tr>
    </tbody>
</table>

```sql
// Assign the variable on the connection
db.set("name", Name {
    first: "Tobie",
    last: "Morgan Hitchcock",
}).await?;
// Use the variable in a subsequent query
db.query("CREATE person SET name = $name").await?;
// Use the variable in a subsequent query
db.query("SELECT * FROM person WHERE name.first = $name.first").await?;
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="query" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>query</span>
        <span>(sql)</span>
        <span>.</span>
        <span className='function'>bind</span>
        <span>(vars)</span>
    </div>
</div>

Runs a set of SurrealQL statements against the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>sql</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Specifies the SurrealQL statements.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>vars</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Assigns variables which can be used in the query.
            </td>
        </tr>
    </tbody>
</table>

```sql
// Run some queries
let sql = "
    CREATE person;
    SELECT * FROM type::table($table);
";
let mut result = db
    .query(sql)
    .bind(("table", "person"))
    .await?;
// Get the first result from the first query
let created: Option<Person> = result.take(0)?;
// Get all of the results from the second query
let people: Vec<Person> = result.take(1)?;
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="select" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>select</span>
        <span>(resource)</span>
    </div>
</div>

Selects all records in a table, or a specific record, from the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or a record ID to select.
            </td>
        </tr>
    </tbody>
</table>

```sql
// Select all records from a table
let people: Vec<Person> = db.select("person").await?;
// Select a specific record from a table
let person: Option<Person> = db.select(("person", "h5wxrf2ewk8xjxosxtyc")).await?;
```

This function will run the following query in the database:

```
SELECT * FROM $resource;
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="create" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>create</span>
        <span>(resource)</span>
        <span>.</span>
        <span className='function'>content</span>
        <span>(data)</span>
    </div>
</div>

Creates a record in the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to create.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The document / record data to insert.
            </td>
        </tr>
    </tbody>
</table>

```sql
// Create a record with a random ID
let people: Vec<Person> = db.create("person").await?;
// Create a record with a specific ID
let record: Record = db
    .create(("person", "tobie"))
    .content(Person {
        name: "Tobie",
        settings: {
            active: true,
            marketing: true,
       },
    }).await?;
```

This function will run the following query in the database.

```
CREATE $resource CONTENT $data;
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="update" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>update</span>
        <span>(resource)</span>
        <span>.</span>
        <span className='function'>content</span>
        <span>(data)</span>
    </div>
</div>

Updates all records in a table, or a specific record, in the database.

:::note
<em>NOTE:</em> This function replaces the current document / record data with the specified data.
:::

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to create.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The document / record data to insert.
            </td>
        </tr>
    </tbody>
</table>

```sql
// Update all records in a table
let people: Vec<Person> = db.update("person").await?;
// Update a record with a specific ID
let person: Option<Person> = db
    .update(("person", "tobie"))
    .content(Person {
        name: "Tobie",
        settings: {
            active: true,
            marketing: true,
        },
    }).await?;
```

This function will run the following query in the database.

```
UPDATE $resource CONTENT $data;
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="update" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>update</span>
        <span>(resource)</span>
        <span>.</span>
        <span className='function'>merge</span>
        <span>(data)</span>
    </div>
</div>

Modifies all records in a table, or a specific record, in the database.

:::note
<em>NOTE:</em> This function merges the current document / record data with the specified data.
:::

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to create.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The document / record data to insert.
            </td>
        </tr>
    </tbody>
</table>

```sql
// Update all records in a table
let people: Vec<Person> = db.update("person")
    .merge(Document {
        updated_at: Datetime::default(),
    })
    .await?;
// Update a record with a specific ID
let person: Option<Person> = db.update(("person", "tobie"))
    .merge(Document {
        updated_at: Datetime::default(),
        settings: Settings {
            active: true,
        },
    })
    .await?;
```

This function will run the following query in the database.

```
UPDATE $resource MERGE $data;
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="update" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>update</span>
        <span>(resource)</span>
        <span>.</span>
        <span className='function'>patch</span>
        <span>(data)</span>
    </div>
</div>

Applies JSON Patch changes to all records, or a specific record, in the database.

:::note
<em>NOTE:</em> This function patches the current document / record data with the specified JSON Patch data.
:::

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to modify.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The JSON Patch data with which to modify the records.
            </td>
        </tr>
    </tbody>
</table>

```sql
// Update all records in a table
let people: Vec<Person> = db.update("person")
    .patch(PatchOp::replace("/created_at", Datetime::default()))
    .await?;

// Update a record with a specific ID
let person: Option<Person> = db.update(("person", "tobie"))
    .patch(PatchOp::replace("/settings/active", false))
    .patch(PatchOp::add("/tags", &["developer", "engineer"]))
    .patch(PatchOp::remove("/temp"))
    .await?;
```

This function will run the following query in the database.

```
UPDATE $resource PATCH $data;
```
</div>

<br />

<div className='layout-group'>

<div className='heading'>
    <div id="delete" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>delete</span>
        <span>(resource)</span>
    </div>
</div>

Deletes all records in a table, or a specific record, from the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or a record ID to select.
            </td>
        </tr>
    </tbody>
</table>

```sql
// Delete all records from a table
let people: Vec<Person> = db.delete("person").await?;
// Delete a specific record from a table
let person: Option<Person> = db.delete(("person", "h5wxrf2ewk8xjxosxtyc")).await?;
```

This function will run the following query in the database.

```
DELETE FROM $resource RETURN BEFORE;
```
</div>